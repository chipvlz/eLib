function str2num(a){return a="0"+a,a=parseFloat(a)}function utf8_encode(a){if(null===a||"undefined"==typeof a)return"";var t,e,o=a+"",r="",i=0;t=e=0,i=o.length;for(var n=0;i>n;n++){var s=o.charCodeAt(n),l=null;if(128>s)e++;else if(s>127&&2048>s)l=String.fromCharCode(s>>6|192,63&s|128);else if(55296!=(63488&s))l=String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128);else{if(55296!=(64512&s))throw new RangeError("Unmatched trail surrogate at "+n);var c=o.charCodeAt(++n);if(56320!=(64512&c))throw new RangeError("Unmatched lead surrogate at "+(n-1));s=((1023&s)<<10)+(1023&c)+65536,l=String.fromCharCode(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}null!==l&&(e>t&&(r+=o.slice(t,e)),r+=l,t=e=n+1)}return e>t&&(r+=o.slice(t,i)),r}function md5(a){if(""==a)return"";var t,e,o,r,i,n,s,l,c,d,p=function(a,t){return a<<t|a>>>32-t},u=function(a,t){var e,o,r,i,n;return r=2147483648&a,i=2147483648&t,e=1073741824&a,o=1073741824&t,n=(1073741823&a)+(1073741823&t),e&o?2147483648^n^r^i:e|o?1073741824&n?3221225472^n^r^i:1073741824^n^r^i:n^r^i},g=function(a,t,e){return a&t|~a&e},m=function(a,t,e){return a&e|t&~e},f=function(a,t,e){return a^t^e},h=function(a,t,e){return t^(a|~e)},b=function(a,t,e,o,r,i,n){return a=u(a,u(u(g(t,e,o),r),n)),u(p(a,i),t)},$=function(a,t,e,o,r,i,n){return a=u(a,u(u(m(t,e,o),r),n)),u(p(a,i),t)},v=function(a,t,e,o,r,i,n){return a=u(a,u(u(f(t,e,o),r),n)),u(p(a,i),t)},k=function(a,t,e,o,r,i,n){return a=u(a,u(u(h(t,e,o),r),n)),u(p(a,i),t)},y=function(a){for(var t,e=a.length,o=e+8,r=(o-o%64)/64,i=16*(r+1),n=new Array(i-1),s=0,l=0;e>l;)t=(l-l%4)/4,s=l%4*8,n[t]=n[t]|a.charCodeAt(l)<<s,l++;return t=(l-l%4)/4,s=l%4*8,n[t]=n[t]|128<<s,n[i-2]=e<<3,n[i-1]=e>>>29,n},w=function(a){var t,e,o="",r="";for(e=0;3>=e;e++)t=a>>>8*e&255,r="0"+t.toString(16),o+=r.substr(r.length-2,2);return o},x=[],T=7,j=12,R=17,M=22,C=5,A=9,P=14,O=20,S=4,E=11,H=16,W=23,D=6,L=10,_=15,q=21;for(a=this.utf8_encode(a),x=y(a),s=1732584193,l=4023233417,c=2562383102,d=271733878,t=x.length,e=0;t>e;e+=16)o=s,r=l,i=c,n=d,s=b(s,l,c,d,x[e+0],T,3614090360),d=b(d,s,l,c,x[e+1],j,3905402710),c=b(c,d,s,l,x[e+2],R,606105819),l=b(l,c,d,s,x[e+3],M,3250441966),s=b(s,l,c,d,x[e+4],T,4118548399),d=b(d,s,l,c,x[e+5],j,1200080426),c=b(c,d,s,l,x[e+6],R,2821735955),l=b(l,c,d,s,x[e+7],M,4249261313),s=b(s,l,c,d,x[e+8],T,1770035416),d=b(d,s,l,c,x[e+9],j,2336552879),c=b(c,d,s,l,x[e+10],R,4294925233),l=b(l,c,d,s,x[e+11],M,2304563134),s=b(s,l,c,d,x[e+12],T,1804603682),d=b(d,s,l,c,x[e+13],j,4254626195),c=b(c,d,s,l,x[e+14],R,2792965006),l=b(l,c,d,s,x[e+15],M,1236535329),s=$(s,l,c,d,x[e+1],C,4129170786),d=$(d,s,l,c,x[e+6],A,3225465664),c=$(c,d,s,l,x[e+11],P,643717713),l=$(l,c,d,s,x[e+0],O,3921069994),s=$(s,l,c,d,x[e+5],C,3593408605),d=$(d,s,l,c,x[e+10],A,38016083),c=$(c,d,s,l,x[e+15],P,3634488961),l=$(l,c,d,s,x[e+4],O,3889429448),s=$(s,l,c,d,x[e+9],C,568446438),d=$(d,s,l,c,x[e+14],A,3275163606),c=$(c,d,s,l,x[e+3],P,4107603335),l=$(l,c,d,s,x[e+8],O,1163531501),s=$(s,l,c,d,x[e+13],C,2850285829),d=$(d,s,l,c,x[e+2],A,4243563512),c=$(c,d,s,l,x[e+7],P,1735328473),l=$(l,c,d,s,x[e+12],O,2368359562),s=v(s,l,c,d,x[e+5],S,4294588738),d=v(d,s,l,c,x[e+8],E,2272392833),c=v(c,d,s,l,x[e+11],H,1839030562),l=v(l,c,d,s,x[e+14],W,4259657740),s=v(s,l,c,d,x[e+1],S,2763975236),d=v(d,s,l,c,x[e+4],E,1272893353),c=v(c,d,s,l,x[e+7],H,4139469664),l=v(l,c,d,s,x[e+10],W,3200236656),s=v(s,l,c,d,x[e+13],S,681279174),d=v(d,s,l,c,x[e+0],E,3936430074),c=v(c,d,s,l,x[e+3],H,3572445317),l=v(l,c,d,s,x[e+6],W,76029189),s=v(s,l,c,d,x[e+9],S,3654602809),d=v(d,s,l,c,x[e+12],E,3873151461),c=v(c,d,s,l,x[e+15],H,530742520),l=v(l,c,d,s,x[e+2],W,3299628645),s=k(s,l,c,d,x[e+0],D,4096336452),d=k(d,s,l,c,x[e+7],L,1126891415),c=k(c,d,s,l,x[e+14],_,2878612391),l=k(l,c,d,s,x[e+5],q,4237533241),s=k(s,l,c,d,x[e+12],D,1700485571),d=k(d,s,l,c,x[e+3],L,2399980690),c=k(c,d,s,l,x[e+10],_,4293915773),l=k(l,c,d,s,x[e+1],q,2240044497),s=k(s,l,c,d,x[e+8],D,1873313359),d=k(d,s,l,c,x[e+15],L,4264355552),c=k(c,d,s,l,x[e+6],_,2734768916),l=k(l,c,d,s,x[e+13],q,1309151649),s=k(s,l,c,d,x[e+4],D,4149444226),d=k(d,s,l,c,x[e+11],L,3174756917),c=k(c,d,s,l,x[e+2],_,718787259),l=k(l,c,d,s,x[e+9],q,3951481745),s=u(s,o),l=u(l,r),c=u(c,i),d=u(d,n);var B=w(s)+w(l)+w(c)+w(d);return B.toLowerCase()}function pulsw(a){$("#"+a).pulsate({color:"#dfba49",repeat:!1})}function pulse(a){$("#"+a).pulsate({color:"#f3565d",repeat:!1})}function addbookimage(){var a=str2num($("#countbookimage tr:last td:first").html())+1,t=a-1;6>t&&$("#bookimage"+t+"tr").after("<tr id='bookimage"+a+"tr'><td>"+a+"</td><td><a href='../../assets/global/img/no-image.gif' class='fancybox-button' id='bookimagebig"+a+"'><img class='img-responsive' width='135' height='180' id='bookimagethumb"+a+"' src='../../135x180/assets/global/img/no-image.gif'></a></td><td><input type='text' name='book[images]["+a+"]' id='bookimagetext"+a+"' style='margin-bottom: 5px;' class='form-control'><div id='bookimage"+a+"div'><div class='input-icon right'><i class='fa fa-info-circle tooltips' data-original-title='Chỉ cho phép các tệp dưới 3mb, định dạng jpg, jpeg ,png ,gif ,tiff ,bmp' data-container='body' id='errbookimage"+a+"'></i><input type='file' id='bookimage"+a+"' class='form-control' onchange='uploadbookimage("+a+")'/></div></div></td><td><div id='bookimagebutton"+a+"' style='display: none;'><div class='margin-bottom-5'><a class='btn btn-sm yellow filter-submit margin-bottom' href='javascript:submitbookimage("+a+")'><i class='fa fa-check'></i> Chấp nhận</a></div><div class='margin-bottom-5'><a class='btn btn-sm red filter-submit margin-bottom' href='javascript:cancelbookimage("+a+")'><i class='fa fa-ban'></i> Hủy</a></div></div><a href='javascript:delbookimage("+a+");' class='btn default btn-sm'><i class='fa fa-times'></i> Xóa </a></td></tr>"),5==t&&$("#buttonaddbookimage").hide("fast")}function delbookimage(a){if(1!=a){$("#bookimage"+a+"tr").hide("slow",function(){$("#bookimage"+a+"tr").remove()});for(var t=a+1;6>=t;t++)kq=t-1,$("#bookimage"+t+"tr td:first").text(kq),$("#bookimage"+t+"tr td:last a:last").attr("href","javascript:delbookimage("+kq+")"),$("#bookimage"+t).attr("onchange","uploadbookimage("+kq+")"),$("#bookimagebutton"+t+" div:first a:first").attr("href","javascript:submitbookimage("+kq+")"),$("#bookimagebutton"+t+" div:last a:first").attr("href","javascript:cancelbookimage("+kq+")"),$("#bookimage"+t+"tr").attr("id","bookimage"+kq+"tr"),$("#bookimagebig"+t).attr("id","bookimagebig"+kq),$("#bookimagethumb"+t).attr("id","bookimagethumb"+kq),$("#bookimagetext"+t).attr("name","book[image]["+kq+"]"),$("#bookimagetext"+t).attr("id","bookimagetext"+kq),$("#errbookimage"+t).attr("id","errbookimage"+kq),$("#bookimage"+t).attr("id","bookimage"+kq),$("#bookimagebutton"+t).attr("id","bookimagebutton"+kq),$("#bookimage"+t).attr("id","bookimage"+kq),$("#bookimage"+t).attr("id","bookimage"+kq);$("#buttonaddbookimage").show("fast")}}function submitbookimage(a){$("#bookimagebutton"+a).hide("fast"),$("#bookimage"+a).val(""),$("#errbookimage"+a).attr({"data-original-title":"Chỉ cho phép các tệp dưới 3mb, định dạng jpg, jpeg ,png ,gif ,tiff ,bmp","class":"fa fa-info-circle tooltips"}),$("#bookimagetext"+a).removeAttr("old"),$("#bookimagebig"+a).removeAttr("old"),$("#bookimagethumb"+a).removeAttr("old"),$("#bookimage"+a+"div").removeAttr("class","has-success")}function cancelbookimage(a){$("#bookimagethumb"+a).attr("src",$("#bookimagethumb"+a).attr("old")),$("#bookimagebig"+a).attr("href",$("#bookimagebig"+a).attr("old")),$("#bookimagetext"+a).attr("value",$("#bookimagetext"+a).attr("old")),$("#bookimagebutton"+a).hide("fast"),$("#bookimage"+a).val(""),$("#errbookimage"+a).attr({"data-original-title":"Chỉ cho phép các tệp dưới 3mb, định dạng jpg, jpeg ,png ,gif ,tiff ,bmp","class":"fa fa-info-circle tooltips"}),$("#bookimagetext"+a).removeAttr("old"),$("#bookimagebig"+a).removeAttr("old"),$("#bookimagethumb"+a).removeAttr("old"),$("#bookimage"+a+"div").removeAttr("class","has-success")}function uploadbookimage(a){var t=document.getElementById("bookimage"+a).files[0];if(null!=t){var e=new FormData;e.append("image",t),$.ajax({url:"process/upload.php",type:"post",dataType:"json",data:e,processData:!1,contentType:!1,enctype:"multipart/form-data",success:function(t){return t.hasOwnProperty("error")&&"success"==t.error?("0"!=t.image&&("2"==t.image?$("#errbookimage"+a).attr({"data-original-title":"Định dạng không hợp lệ","class":"fa fa-warning tooltips"}):"3"==t.image&&$("#errbookimage"+a).attr({"data-original-title":"Tệp vượt quá dung lượng cho phép","class":"fa fa-warning tooltips"}),$("#bookimage"+a+"div").attr("class","has-warning"),pulsw("bookimage"+a),Metronic.scrollTo2($("#bookimage"+a+"div"),-200)),void("1"==t.done&&($("#errbookimage"+a).attr({"data-original-title":"Ảnh hợp lệ","class":"fa fa-check tooltips"}),$("#imagediv").attr("class","form-group has-success"),$("#bookimagethumb"+a).attr("old",$("#bookimagethumb"+a).attr("src")),$("#bookimagethumb"+a).attr("src","../../135x180/"+t.link),$("#bookimagebig"+a).attr("old",$("#bookimagebig"+a).attr("href")),$("#bookimagebig"+a).attr("href","../../"+t.link),$("#bookimagetext"+a).attr("old",$("#bookimagetext"+a).attr("value")),$("#bookimagetext"+a).attr("value",t.link),$("#bookimagebutton"+a).show("fast"),$("#bookimage"+a).val(""),$("#bookimage"+a+"div").attr("class","has-success"),Metronic.scrollTo2($("#bookimage"+a+"div"),-200)))):(alert("ERROR"),!1)}})}}function getproofread(){for(var a=str2num($("#countproofread tr:last td:first").html()),t="",e=1;a-1>=e;e++)t+=$("#proofreadtext"+e).attr("value")+","+$("#proofreaddes"+e).attr("value")+"|";t+=$("#proofreadtext"+a).attr("value")+","+$("#proofreaddes"+a).attr("value"),$("#proofreadmaintext").attr("value",t)}function addproofread(){var a=str2num($("#countproofread tr:last td:first").html())+1,t=a-1;0!=t?$("#proofread"+t+"tr").after("<tr id='proofread"+a+"tr'><td>"+a+"</td><td><a href='../../assets/global/img/no-image.gif' class='fancybox-button' id='proofreadbig"+a+"'><img class='img-responsive' width='135' height='180' id='proofreadthumb"+a+"' src='../../135x180/assets/global/img/no-image.gif'></a></td><td><input type='text' class='form-control' id='proofreaddes"+a+"'></td><td><input type='text' name='book[images][]' id='proofreadtext"+a+"' style='margin-bottom: 5px;' class='form-control'><div id='proofread"+a+"div'><div class='input-icon right'><i class='fa fa-info-circle tooltips' data-original-title='Chỉ cho phép các tệp dưới 3mb, định dạng jpg, jpeg ,png ,gif ,tiff ,bmp' data-container='body' id='errproofread"+a+"'></i><input type='file' id='proofread"+a+"' class='form-control' onchange='uploadproofread("+a+")'/></div></div></td><td><div id='proofreadbutton"+a+"' style='display: none;'><div class='margin-bottom-5'><a class='btn btn-sm yellow filter-submit margin-bottom' href='javascript:submitproofread("+a+")'><i class='fa fa-check'></i> Chấp nhận</a></div><div class='margin-bottom-5'><a class='btn btn-sm red filter-submit margin-bottom' href='javascript:cancelproofread("+a+")'><i class='fa fa-ban'></i> Hủy</a></div></div><a href='javascript:delproofread("+a+");' class='btn default btn-sm'><i class='fa fa-times'></i> Xóa </a></td></tr>"):$("#countproofread").html("<tr id='proofread"+a+"tr'><td>"+a+"</td><td><a href='../../assets/global/img/no-image.gif' class='fancybox-button' id='proofreadbig"+a+"'><img class='img-responsive' width='135' height='180' id='proofreadthumb"+a+"' src='../../135x180/assets/global/img/no-image.gif'></a></td><td><input type='text' class='form-control' id='proofreaddes"+a+"'></td><td><input type='text' name='book[images][]' id='proofreadtext"+a+"' style='margin-bottom: 5px;' class='form-control'><div id='proofread"+a+"div'><div class='input-icon right'><i class='fa fa-info-circle tooltips' data-original-title='Chỉ cho phép các tệp dưới 3mb, định dạng jpg, jpeg ,png ,gif ,tiff ,bmp' data-container='body' id='errproofread"+a+"'></i><input type='file' id='proofread"+a+"' class='form-control' onchange='uploadproofread("+a+")'/></div></div></td><td><div id='proofreadbutton"+a+"' style='display: none;'><div class='margin-bottom-5'><a class='btn btn-sm yellow filter-submit margin-bottom' href='javascript:submitproofread("+a+")'><i class='fa fa-check'></i> Chấp nhận</a></div><div class='margin-bottom-5'><a class='btn btn-sm red filter-submit margin-bottom' href='javascript:cancelproofread("+a+")'><i class='fa fa-ban'></i> Hủy</a></div></div><a href='javascript:delproofread("+a+");' class='btn default btn-sm'><i class='fa fa-times'></i> Xóa </a></td></tr>")}function delproofread(a){$("#proofread"+a+"tr").hide(500,function(){$("#proofread"+a+"tr").remove()});for(var t=a+1;6>=t;t++)kq=t-1,$("#proofread"+t+"tr td:first").text(kq),$("#proofread"+t+"tr td:last a:last").attr("href","javascript:delproofread("+kq+")"),$("#proofread"+t).attr("onchange","uploadproofread("+kq+")"),$("#proofreadbutton"+t+" div:first a:first").attr("href","javascript:submitproofread("+kq+")"),$("#proofreadbutton"+t+" div:last a:first").attr("href","javascript:cancelproofread("+kq+")"),$("#proofread"+t+"tr").attr("id","proofread"+kq+"tr"),$("#proofreadbig"+t).attr("id","proofreadbig"+kq),$("#proofreadthumb"+t).attr("id","proofreadthumb"+kq),$("#proofreadtext"+t).attr("id","proofreadtext"+kq),$("#errproofread"+t).attr("id","errproofread"+kq),$("#proofread"+t).attr("id","proofread"+kq),$("#proofreadbutton"+t).attr("id","proofreadbutton"+kq),$("#proofread"+t).attr("id","proofread"+kq),$("#proofread"+t).attr("id","proofread"+kq);$("#buttonaddproofread").show("fast")}function submitproofread(a){$("#proofreadbutton"+a).hide("fast"),$("#proofread"+a).val(""),$("#errproofread"+a).attr({"data-original-title":"Chỉ cho phép các tệp dưới 3mb, định dạng jpg, jpeg ,png ,gif ,tiff ,bmp","class":"fa fa-info-circle tooltips"}),$("#proofreadtext"+a).removeAttr("old"),$("#proofreadbig"+a).removeAttr("old"),$("#proofreadthumb"+a).removeAttr("old"),$("#proofread"+a+"div").removeAttr("class","has-success"),getproofread()}function cancelproofread(a){$("#proofreadthumb"+a).attr("src",$("#proofreadthumb"+a).attr("old")),$("#proofreadbig"+a).attr("href",$("#proofreadbig"+a).attr("old")),$("#proofreadtext"+a).attr("value",$("#proofreadtext"+a).attr("old")),$("#proofreadbutton"+a).hide("fast"),$("#proofread"+a).val(""),$("#errproofread"+a).attr({"data-original-title":"Chỉ cho phép các tệp dưới 3mb, định dạng jpg, jpeg ,png ,gif ,tiff ,bmp","class":"fa fa-info-circle tooltips"}),$("#proofreadtext"+a).removeAttr("old"),$("#proofreadbig"+a).removeAttr("old"),$("#proofreadthumb"+a).removeAttr("old"),$("#proofread"+a+"div").removeAttr("class","has-success")}function uploadproofread(a){var t=document.getElementById("proofread"+a).files[0];if(null!=t){var e=new FormData;e.append("image",t),$.ajax({url:"process/upload.php",type:"post",dataType:"json",data:e,processData:!1,contentType:!1,enctype:"multipart/form-data",success:function(t){return t.hasOwnProperty("error")&&"success"==t.error?("0"!=t.image&&("2"==t.image?$("#errproofread"+a).attr({"data-original-title":"Định dạng không hợp lệ","class":"fa fa-warning tooltips"}):"3"==t.image&&$("#errproofread"+a).attr({"data-original-title":"Tệp vượt quá dung lượng cho phép","class":"fa fa-warning tooltips"})),void("1"==t.done&&($("#errproofread"+a).attr({"data-original-title":"Ảnh hợp lệ","class":"fa fa-check tooltips"}),$("#imagediv").attr("class","form-group has-success"),$("#proofreadthumb"+a).attr("old",$("#proofreadthumb"+a).attr("src")),$("#proofreadthumb"+a).attr("src","../../135x180/"+t.link),$("#proofreadbig"+a).attr("old",$("#proofreadbig"+a).attr("href")),$("#proofreadbig"+a).attr("href","../../"+t.link),$("#proofreadtext"+a).attr("old",$("#proofreadtext"+a).attr("value")),$("#proofreadtext"+a).attr("value",t.link),$("#proofreadbutton"+a).show("fast"),$("#proofread"+a).val(""),$("#proofread"+a+"div").attr("class","has-success")))):(alert("ERROR"),!1)}})}}function removeActiveTab(){$("li",$("#click")).each(function(){$(this).removeClass("active")}),$(".tab-pane").each(function(){$(this).removeClass("active")})}function goToGeneral(){removeActiveTab(),$("#tab_general").addClass("active"),$("#click_general").addClass("active")}function goToImages(){removeActiveTab(),$("#tab_images").addClass("active"),$("#click_images").addClass("active")}function bookedit(){return $.ajax({url:"process/edit-book.php",type:"post",dataType:"json",data:{bookid:$('[name="book[id]"]').val(),bookname:$('[name="book[name]"]').val(),bookdescription:$('[name="book[description]"]').code(),bookshortdescription:$('[name="book[short-description]"]').val(),bookkeyword:$('[name="book[keyword]"]').val(),bookcate:$('[name="book[cate]"]:checked').val(),bookbcode:$('[name="book[bcode]"]').val(),booknumber:$('[name="book[number]"]').val(),bookauthor:$('[name="book[author]"]').val(),bookpublisher:$('[name="book[publisher]"]').val(),bookpublishtime:$('[name="book[publish-time]"]').val(),bookpagen:$('[name="book[pagen]"]').val(),booklang:$('[name="book[lang]"]').val(),booklabelnew:$('[name="book[label][new]"]:checked').val(),booklabelhot:$('[name="book[label][hot]"]:checked').val(),booklabelrec:$('[name="book[label][rec]"]:checked').val(),bookimages1:$('[name="book[images][1]"]').val(),bookimages2:$('[name="book[images][2]"]').val(),bookimages3:$('[name="book[images][3]"]').val(),bookimages4:$('[name="book[images][4]"]').val(),bookimages5:$('[name="book[images][5]"]').val(),bookimages6:$('[name="book[images][6]"]').val(),bookproofread:$('[name="book[proofread]"]').val()},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?("0"!=a.bookid?Metronic.alert({type:"danger",icon:"warning",message:"Có lỗi xảy ra",place:"prepend"}):"0"!=a.bookname?(goToGeneral(),$("#errname").attr({"data-original-title":"Chưa nhập tên sách","class":"fa fa-warning tooltips"}),$("#namediv").attr("class","form-group has-warning"),pulsw("bookname"),Metronic.scrollTo2($("#namediv"),-100)):($("#errname").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#namediv").attr("class","form-group"),"0"!=a.bookdescription?(goToGeneral(),$(".note-editor").attr("id","bookdescription"),$("#errdescription").attr({"data-original-title":"Chưa nhập mô tả","class":"fa fa-warning tooltips"}),$("#descriptiondiv").attr("class","form-group has-warning"),pulsw("bookdescription"),Metronic.scrollTo2($("#namediv"),-100)):($("#errdescription").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#descriptiondiv").attr("class","form-group"),"0"!=a.bookshortdescription?(goToGeneral(),$("#errshortdescription").attr({"data-original-title":"Chưa nhập mô tả ngắn","class":"fa fa-warning tooltips"}),$("#shortdescriptiondiv").attr("class","form-group has-warning"),pulsw("bookshortdescription"),Metronic.scrollTo2($("#shortdescriptiondiv"),-100)):($("#errshortdescription").attr({"data-original-title":"Chưa nhập mô tả ngắn","class":"fa fa-info-circle tooltips"}),$("#shortdescriptiondiv").attr("class","form-group"),"0"!=a.bookkeyword?(goToGeneral(),$("#errkeyword").attr({"data-original-title":"Chưa nhập từ khóa","class":"fa fa-warning tooltips"}),$("#keyworddiv").attr("class","form-group has-warning"),pulsw("bookkeyword_tagsinput"),Metronic.scrollTo2($("#keyworddiv"),-100)):($("#errkeyword").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#keyworddiv").attr("class","form-group"),"0"!=a.bookcate?(goToGeneral(),"1"==a.bookcate?($("#errcate").attr({"data-original-title":"Chưa chọn danh mục","class":"fa fa-warning tooltips"}),$("#catediv").attr("class","form-group has-warning"),pulsw("bookcate")):"2"==a.bookcate&&($("#errcate").attr({"data-original-title":"Danh mục này không có thật","class":"fa fa-exclamation tooltips"}),$("#catediv").attr("class","form-group has-error"),pulse("bookcate")),Metronic.scrollTo2($("#catediv"),-100)):($("#errcate").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#catediv").attr("class","form-group"),"0"!=a.bookbcode?(goToGeneral(),"1"==a.bookbcode?($("#errbcode").attr({"data-original-title":"Chưa nhập mã sách","class":"fa fa-warning tooltips"}),$("#bcodediv").attr("class","form-group has-warning"),pulsw("bookbcode")):"2"==a.bookbcode&&($("#errbcode").attr({"data-original-title":"Mã sách này đã bị trùng","class":"fa fa-exclamation tooltips"}),$("#bcodediv").attr("class","form-group has-error"),pulse("bookbcode")),Metronic.scrollTo2($("#bcodediv"),-100)):($("#errbcode").attr({"data-original-title":"Chưa nhập mã sách","class":"fa fa-info-circle tooltips"}),$("#bcodediv").attr("class","form-group"),"0"!=a.booknumber?(goToGeneral(),"1"==a.booknumber?($("#errnumber").attr({"data-original-title":"Chưa nhập số lượng sách","class":"fa fa-warning tooltips"}),$("#numberdiv").attr("class","form-group has-warning"),pulsw("booknumber")):"2"==a.booknumber&&($("#errnumber").attr({"data-original-title":"Số lượng sách chỉ gồm số (0-9)","class":"fa fa-exclamation tooltips"}),$("#numberdiv").attr("class","form-group has-error"),pulse("booknumber")),Metronic.scrollTo2($("#numberdiv"),-100)):($("#errnumber").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#numberdiv").attr("class","form-group"),"0"!=a.bookauthor?(goToGeneral(),$("#errauthor").attr({"data-original-title":"Chưa nhập tác giả","class":"fa fa-warning tooltips"}),$("#authordiv").attr("class","form-group has-warning"),pulsw("bookauthor"),Metronic.scrollTo2($("#authordiv"),-100)):($("#errauthor").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#authordiv").attr("class","form-group"),"0"!=a.bookpagen?(goToGeneral(),"1"==a.bookpagen?($("#errpagen").attr({"data-original-title":"Chưa nhập số trang sách","class":"fa fa-warning tooltips"}),$("#pagendiv").attr("class","form-group has-warning"),pulsw("bookpagen")):"2"==a.bookpagen&&($("#errpagen").attr({"data-original-title":"Số trang sách chỉ gồm số (0-9)","class":"fa fa-exclamation tooltips"}),$("#pagendiv").attr("class","form-group has-error"),pulse("bookpagen")),Metronic.scrollTo2($("#pagendiv"),-100)):($("#errpagen").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#pagendiv").attr("class","form-group"),"0"!=a.booklang?(goToGeneral(),"1"==a.booklang?($("#errlang").attr({"data-original-title":"Chưa chọn ngôn ngữ","class":"fa fa-warning tooltips"}),$("#langdiv").attr("class","form-group has-warning"),pulsw("booklang")):"2"==a.booklang&&($("#errlang").attr({"data-original-title":"Ngôn ngữ này không có thật","class":"fa fa-exclamation tooltips"}),$("#langdiv").attr("class","form-group has-error"),pulse("booklang")),Metronic.scrollTo2($("#langdiv"),-100)):($("#errlang").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#langdiv").attr("class","form-group"),0!=a.bookimages1?(goToImages(),$("#errbookimages1").attr({"data-original-title":"Ảnh đầu tiên là bắt buộc","class":"fa fa-warning tooltips"}),$("#bookimages1div").attr("class","has-warning"),pulsw("bookimagetext1"),Metronic.scrollTo2($("#langdiv"),-100)):($("#errbookimages1").attr({"data-original-title":"Ảnh đầu tiên là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#bookimages1div").attr("class","")))))))))))),void("1"==a.done&&Metronic.alert({type:"success",icon:"check",message:"Đã lưu",place:"prepend"}))):(alert("ERROR"),!1)}}),!1}function addMoreBook(a){bootbox.prompt("Bao nhiêu sách được thêm?",function(t){null!=t&&$.ajax({url:"process/add-more-book.php",type:"post",dataType:"json",data:{id:a,number:t},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("1"==a.done&&bootbox.alert("Thêm sách thành công!",function(){window.location.reload()})):(alert("ERROR"),!1)}})})}function uncheckCate(){$('[name="catecate"]:checked').parent().removeClass("checked"),$('[name="catecate"]:checked').prop("checked",!1)}function createCate(){var a=new FormData(document.getElementById("catedata"));return $.ajax({url:"process/create-cate.php",type:"post",dataType:"json",data:a,processData:!1,contentType:!1,enctype:"multipart/form-data",success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("0"!=a.title?($("#errtitle").attr({"data-original-title":"Chưa nhập tên danh mục","class":"fa fa-warning tooltips"}),$("#titlediv").attr("class","form-group has-warning"),pulsw("catetitle"),Metronic.scrollTo2($("#titlediv"),-100)):($("#errtitle").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#titlediv").attr("class","form-group"),"0"!=a.description?($("#errdescription").attr({"data-original-title":"Chưa nhập mô tả","class":"fa fa-warning tooltips"}),$("#descriptiondiv").attr("class","form-group has-warning"),pulsw("catedescription"),Metronic.scrollTo2($("#descriptiondiv"),-100)):($("#errdescription").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#descriptiondiv").attr("class","form-group"),"0"!=a.keyword?($("#errkeyword").attr({"data-original-title":"Chưa nhập từ khóa","class":"fa fa-warning tooltips"}),$("#keyworddiv").attr("class","form-group has-warning"),pulsw("catekeyword"),Metronic.scrollTo2($("#keyworddiv"),-100)):($("#errkeyword").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#keyworddiv").attr("class","form-group"),"0"!=a.cate?($("#errcate").attr({"data-original-title":"Danh mục không hợp lệ","class":"fa fa-warning tooltips"}),$("#catediv").attr("class","form-group has-warning"),pulsw("catecate"),Metronic.scrollTo2($("#catediv"),-100)):($("#errcate").attr({"data-original-title":"Mục này không bắt buộc","class":"fa fa-info-circle tooltips"}),$("#catediv").attr("class","form-group"),"0"!=a.image?("2"==a.image?$("#errimage").attr({"data-original-title":"Ảnh không hợp lệ, chỉ cho phép các tệp định dạng jpg, jpeg ,png ,gif ,tiff ,bmp","class":"fa fa-warning tooltips"}):"3"==a.image?$("#errimage").attr({"data-original-title":"Ảnh không hợp lệ, chỉ cho phép các tệp dưới 3mb","class":"fa fa-warning tooltips"}):"4"==a.image&&$("#errimage").attr({"data-original-title":"Ảnh không hợp lệ, chỉ cho phép ảnh kích thước lớn hơn hoặc bằng 1500x280 và tỉ lệ với 1500x280","class":"fa fa-warning tooltips"}),$("#imagediv").attr("class","form-group has-warning"),pulsw("cateimage"),Metronic.scrollTo2($("#imagediv"),-100)):($("#errimage").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#imagediv").attr("class","form-group"),"1"==a.done&&Metronic.alert({type:"success",icon:"check",message:"Đã thêm danh mục mới",place:"prepend"}))))))):(alert("ERROR"),!1)}}),!1}function handleCateImage(){"1"==$('[name="cateimagestatus"]:checked').val()?($("#hidecateimage").show("fast"),Metronic.scrollTo2($("#hidecateimage"),-100)):$("#hidecateimage").hide("fast")}function editCate(){var a=new FormData(document.getElementById("catedata"));return $.ajax({url:"process/edit-cate.php",type:"post",dataType:"json",data:a,processData:!1,contentType:!1,enctype:"multipart/form-data",success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("0"!=a.title?($("#errtitle").attr({"data-original-title":"Chưa nhập tên danh mục","class":"fa fa-warning tooltips"}),$("#titlediv").attr("class","form-group has-warning"),pulsw("catetitle"),Metronic.scrollTo2($("#titlediv"),-100)):($("#errtitle").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#titlediv").attr("class","form-group"),"0"!=a.description?($("#errdescription").attr({"data-original-title":"Chưa nhập mô tả","class":"fa fa-warning tooltips"}),$("#descriptiondiv").attr("class","form-group has-warning"),pulsw("catedescription"),Metronic.scrollTo2($("#descriptiondiv"),-100)):($("#errdescription").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#descriptiondiv").attr("class","form-group"),"0"!=a.keyword?($("#errkeyword").attr({"data-original-title":"Chưa nhập từ khóa","class":"fa fa-warning tooltips"}),$("#keyworddiv").attr("class","form-group has-warning"),pulsw("catekeyword"),Metronic.scrollTo2($("#keyworddiv"),-100)):($("#errkeyword").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#keyworddiv").attr("class","form-group"),"0"!=a.cate?($("#errcate").attr({"data-original-title":"Danh mục không hợp lệ","class":"fa fa-warning tooltips"}),$("#catediv").attr("class","form-group has-warning"),pulsw("catecate"),Metronic.scrollTo2($("#catediv"),-100)):($("#errcate").attr({"data-original-title":"Mục này không bắt buộc","class":"fa fa-info-circle tooltips"}),$("#catediv").attr("class","form-group"),"0"!=a.image?("2"==a.image?$("#errimage").attr({"data-original-title":"Ảnh không hợp lệ, chỉ cho phép các tệp định dạng jpg, jpeg ,png ,gif ,tiff ,bmp","class":"fa fa-warning tooltips"}):"3"==a.image?$("#errimage").attr({"data-original-title":"Ảnh không hợp lệ, chỉ cho phép các tệp dưới 3mb","class":"fa fa-warning tooltips"}):"4"==a.image&&$("#errimage").attr({"data-original-title":"Ảnh không hợp lệ, chỉ cho phép ảnh kích thước lớn hơn hoặc bằng 1500x280 và tỉ lệ với 1500x280","class":"fa fa-warning tooltips"}),$("#imagediv").attr("class","form-group has-warning"),pulsw("cateimage"),Metronic.scrollTo2($("#imagediv"),-100)):($("#errimage").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#imagediv").attr("class","form-group"),"1"==a.done&&Metronic.alert({type:"success",icon:"check",message:"Đã lưu",place:"prepend"}))))))):(alert("ERROR"),!1)}}),!1}function delCate(a,t){bootbox.confirm("Bạn có chắc là muốn xóa danh mục này?",function(e){1==e&&$.ajax({url:"process/del-cate.php",type:"post",dataType:"json",data:{id:a,type:t},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void(window.location="cate-list.php"):(alert("ERROR"),!1)}})})}function delBook(a){bootbox.confirm("Bạn có chắc là muốn xóa sách này?",function(t){1==t&&$.ajax({url:"process/del-book.php",type:"post",dataType:"json",data:{id:a},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void(window.location="book-list.php"):(alert("ERROR"),!1)}})})}function delCate2(a,t){bootbox.confirm("Bạn có chắc là muốn xóa danh mục này?",function(e){1==e&&$.ajax({url:"process/del-cate.php",type:"post",dataType:"json",data:{id:a,type:t},success:function(e){return e.hasOwnProperty("error")&&"success"==e.error?void $('[data-type="'+t+'"][data-id="'+a+'"]').remove():(alert("ERROR"),!1)}})})}function confirmUser(a){bootbox.confirm("Bạn có chắc là muốn xác nhận thành viên này?",function(t){1==t&&$.ajax({url:"process/confirm-user.php",type:"post",dataType:"json",data:{id:a},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("1"==a.done&&($("#textConfirm").removeClass("label-danger").addClass("label-success").text("Đã xác nhận"),$("#btnConfirm").remove())):(alert("ERROR"),!1)}})})}function userMd5PassEncode(){$('[name="user[pass]"]').val(md5($('[name="user[pass]"]').val()))}function useredit(){return $.ajax({url:"process/edit-user.php",type:"post",dataType:"json",data:{userid:$('[name="user[id]"]').val(),username:$('[name="user[name]"]').val(),userclass:$('[name="user[class]"]').val(),userbirthday:$('[name="user[birthday]"]').val(),useremail:$('[name="user[email]"]').val(),userscode:$('[name="user[scode]"]').val(),userpass:$('[name="user[pass]"]').val()},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("0"!=a.name?($("#errname").attr({"data-original-title":"Chưa nhập tên thành viên","class":"fa fa-warning tooltips"}),$("#namediv").attr("class","form-group has-warning"),pulsw("username"),Metronic.scrollTo2($("#namediv"),-100)):($("#errname").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#namediv").attr("class","form-group"),"0"!=a.class?("1"==a.class?($("#errclass").attr({"data-original-title":"Chưa nhập lớp","class":"fa fa-warning tooltips"}),$("#classdiv").attr("class","form-group has-warning"),pulsw("userclass")):"2"==a.class&&($("#errclass").attr({"data-original-title":"Lớp không hợp lệ","class":"fa fa-exclamation tooltips"}),$("#classdiv").attr("class","form-group has-error"),pulse("userclass")),Metronic.scrollTo2($("#classdiv"),-100)):($("#errclass").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#classdiv").attr("class","form-group"),"0"!=a.birthday?("1"==a.birthday?($("#errbirthday").attr({"data-original-title":"Chưa nhập ngày sinh","class":"fa fa-warning tooltips"}),$("#birthdaydiv").attr("class","form-group has-warning"),pulsw("userbirthday")):"2"==a.birthday&&($("#errbirthday").attr({"data-original-title":"Ngày sinh không hợp lệ","class":"fa fa-exclamation tooltips"}),$("#birthdaydiv").attr("class","form-group has-error"),pulse("userbirthday")),Metronic.scrollTo2($("#birthdaydiv"),-100)):($("#errbirthday").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#birthdaydiv").attr("class","form-group"),"0"!=a.email?("1"==a.email?($("#erremail").attr({"data-original-title":"Chưa nhập email","class":"fa fa-warning tooltips"}),$("#emaildiv").attr("class","form-group has-warning"),pulsw("useremail")):"2"==a.email?($("#erremail").attr({"data-original-title":"Email không hợp lệ","class":"fa fa-exclamation tooltips"}),$("#emaildiv").attr("class","form-group has-error"),pulse("useremail")):"3"==a.email&&($("#erremail").attr({"data-original-title":"Email đã có người sử dụng","class":"fa fa-exclamation tooltips"}),$("#emaildiv").attr("class","form-group has-error"),pulse("useremail")),Metronic.scrollTo2($("#emaildiv"),-100)):($("#erremail").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#emaildiv").attr("class","form-group"),"0"!=a.scode?("1"==a.scode?($("#errscode").attr({"data-original-title":"Chưa nhập mã học sinh","class":"fa fa-warning tooltips"}),$("#scodediv").attr("class","form-group has-warning"),pulsw("userscode")):"2"==a.scode&&($("#errscode").attr({"data-original-title":"Mã học sinh không hợp lệ","class":"fa fa-exclamation tooltips"}),$("#scodediv").attr("class","form-group has-error"),pulse("userscode")),Metronic.scrollTo2($("#scodediv"),-100)):($("#errscode").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#scodediv").attr("class","form-group"),"0"!=a.pass?("1"==a.pass?($("#errpass").attr({"data-original-title":"Chưa nhập mật khẩu","class":"fa fa-warning tooltips"}),$("#passdiv").attr("class","form-group has-warning"),pulsw("userpass")):"2"==a.pass&&($("#errpass").attr({"data-original-title":"Mật khẩu không hợp lệ","class":"fa fa-exclamation tooltips"}),$("#passdiv").attr("class","form-group has-error"),pulse("userpass")),Metronic.scrollTo2($("#passdiv"),-100)):($("#errpass").attr({"data-original-title":"Mục này là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#passdiv").attr("class","form-group"),"1"==a.done&&Metronic.alert({type:"success",icon:"check",message:"Đã lưu",place:"prepend"})))))))):(alert("ERROR"),!1)
}}),!1}function cancelOrder(a){return bootbox.confirm("Bạn có chắc là muốn hủy đơn sách này?",function(t){1==t&&$.ajax({url:"process/handle-order.php",type:"post",dataType:"json",data:{id:a,type:1},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("1"==a.done&&bootbox.alert("Hủy đơn sách thành công!",function(){window.location.reload()})):(alert("ERROR"),!1)}})}),!1}function confirmOrder(a){return bootbox.confirm("Bạn có chắc là muốn xác nhận đơn sách này?",function(t){1==t&&$.ajax({url:"process/handle-order.php",type:"post",dataType:"json",data:{id:a,type:2},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("1"==a.done&&bootbox.alert("Xác nhận đơn sách thành công!",function(){window.location.reload()})):(alert("ERROR"),!1)}})}),!1}function startOrder(a){return bootbox.confirm("Đơn sách này đã được mượn?",function(t){1==t&&$.ajax({url:"process/handle-order.php",type:"post",dataType:"json",data:{id:a,type:3},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("1"==a.done&&bootbox.alert("Xác nhận mượn sách thành công!",function(){window.location.reload()})):(alert("ERROR"),!1)}})}),!1}function stopOrder(a){return bootbox.confirm("Đơn sách này đã được trả?",function(t){1==t&&$.ajax({url:"process/handle-order.php",type:"post",dataType:"json",data:{id:a,type:4},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("1"==a.done&&bootbox.alert("Xác nhận trả sách thành công!",function(){window.location.reload()})):(alert("ERROR"),!1)}})}),!1}function warnOrder(a){return bootbox.confirm("Yêu cầu trả sách?",function(t){1==t&&$.ajax({url:"process/handle-order.php",type:"post",dataType:"json",data:{id:a,type:6},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("1"==a.done&&bootbox.alert("Thành công!",function(){window.location.reload()})):(alert("ERROR"),!1)}})}),!1}function editMethod(a){$("#editMethodSn").text("Mượn về"==$("#editMethodSn").text()?"Đọc tại chỗ":"Mượn về"),$("#editMethodBtn").html('<i class="fa fa-save"></i> Lưu/Hủy</a>'),$("#editMethodBtn").attr("onclick","editMethod2("+a+")")}function editMethod2(a){return bootbox.confirm("Có chắc muốn sửa hình thức mượn của đơn sách này?",function(t){1==t?$.ajax({url:"process/edit-method-order.php",type:"post",dataType:"json",data:{id:a},success:function(t){return t.hasOwnProperty("error")&&"success"==t.error?void("1"==t.done&&($("#editMethodBtn").html('<i class="fa fa-edit"></i> Sửa</a>'),$("#editMethodBtn").attr("onclick","editMethod("+a+")"))):(alert("ERROR"),!1)}}):($("#editMethodSn").text("Mượn về"==$("#editMethodSn").text()?"Đọc tại chỗ":"Mượn về"),$("#editMethodBtn").html('<i class="fa fa-edit"></i> Sửa</a>'),$("#editMethodBtn").attr("onclick","editMethod("+a+")"))}),!1}function editNote(a){$("#editNoteSn").html('<textarea class="form-control" id="editNoteValue">'+$("#editNoteSn").html()+"</textarea>"),$("#editNoteBtn").html('<i class="fa fa-save"></i> Lưu/Hủy</a>'),$("#editNoteBtn").attr("onclick","editNote2("+a+")")}function editNote2(a){return bootbox.confirm("Có chắc muốn sửa ghi chú của đơn sách này?",function(t){$.ajax(1==t?{url:"process/edit-note-order.php",type:"post",dataType:"json",data:{id:a,note:$("#editNoteValue").val()},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("1"==a.done&&$("#editNoteSn").html($("#editNoteValue").val())):(alert("ERROR"),!1)}}:{url:"process/edit-note-order.php",type:"post",dataType:"json",data:{id:a,type:1},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("1"==a.done&&$("#editNoteSn").text(a.note)):(alert("ERROR"),!1)}})}),$("#editNoteBtn").html('<i class="fa fa-edit"></i> Sửa</a>'),$("#editNoteBtn").attr("onclick","editNote("+a+")"),!1}function delEachOrder(a,t){return bootbox.confirm("Có chắc muốn xóa sách này khỏi đơn sách?",function(e){1==e&&$.ajax({url:"process/del-eachorder.php",type:"post",dataType:"json",data:{id:a,id2:t},success:function(t){return t.hasOwnProperty("error")&&"success"==t.error?void("1"==t.done&&$("#eachorder"+a).hide("slow",function(){$("#eachorder"+a).remove()})):(alert("ERROR"),!1)}})}),!1}function reConfirmOrder(a){return bootbox.confirm("Yêu cầu thành viên xác nhận lại đơn sách?",function(t){1==t&&$.ajax({url:"process/handle-order.php",type:"post",dataType:"json",data:{id:a,type:5},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("1"==a.done&&bootbox.alert("Yêu cầu thành công!",function(){window.location.reload()})):(alert("ERROR"),!1)}})}),!1}function addProblem(){return $.ajax({url:"process/add-problem.php",type:"post",dataType:"json",data:{book:$("#book").val(),user:$("#user").val(),type:$("#type").val(),note:$("#note").val()},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("0"!=a.book?("1"==a.book?($("#errbook").attr({"data-original-title":"Chưa nhập id sách","class":"fa fa-warning tooltips"}),$("#bookdiv").attr("class","form-group has-warning"),pulsw("book")):"2"==a.book&&($("#errbook").attr({"data-original-title":"Không có sách này","class":"fa fa-exclamation tooltips"}),$("#bookdiv").attr("class","form-group has-error"),pulse("book")),Metronic.scrollTo2($("#bookdiv"),-100)):($("#errbook").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#bookdiv").attr("class","form-group has-success"),"0"!=a.user?("1"==a.user?($("#erruser").attr({"data-original-title":"Chưa nhập id thành viên","class":"fa fa-warning tooltips"}),$("#userdiv").attr("class","form-group has-warning"),pulsw("user")):"2"==a.user&&($("#erruser").attr({"data-original-title":"Không có thành viên này","class":"fa fa-exclamation tooltips"}),$("#userdiv").attr("class","form-group has-error"),pulse("user")),Metronic.scrollTo2($("#userdiv"),-100)):($("#erruser").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#userdiv").attr("class","form-group has-success"),"0"!=a.type?($("#errtype").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#typediv").attr("class","form-group has-error"),pulse("type"),Metronic.scrollTo2($("#typediv"),-100)):($("#errtype").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#typediv").attr("class","form-group has-success"),"1"==a.done&&(window.location="problem-list.php"))))):(alert("ERROR"),!1)}}),!1}function editProblem(){return $.ajax({url:"process/edit-problem.php",type:"post",dataType:"json",data:{id:$("#proid").val(),book:$("#book").val(),user:$("#user").val(),type:$("#type").val(),note:$("#note").val()},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("0"!=a.id?alert("ERROR"):"0"!=a.book?("1"==a.book?($("#errbook").attr({"data-original-title":"Chưa nhập id sách","class":"fa fa-warning tooltips"}),$("#bookdiv").attr("class","form-group has-warning"),pulsw("book")):"2"==a.book&&($("#errbook").attr({"data-original-title":"Không có sách này","class":"fa fa-exclamation tooltips"}),$("#bookdiv").attr("class","form-group has-error"),pulse("book")),Metronic.scrollTo2($("#bookdiv"),-100)):($("#errbook").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#bookdiv").attr("class","form-group has-success"),"0"!=a.user?("1"==a.user?($("#erruser").attr({"data-original-title":"Chưa nhập id thành viên","class":"fa fa-warning tooltips"}),$("#userdiv").attr("class","form-group has-warning"),pulsw("user")):"2"==a.user&&($("#erruser").attr({"data-original-title":"Không có thành viên này","class":"fa fa-exclamation tooltips"}),$("#userdiv").attr("class","form-group has-error"),pulse("user")),Metronic.scrollTo2($("#userdiv"),-100)):($("#erruser").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#userdiv").attr("class","form-group has-success"),"0"!=a.type?($("#errtype").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#typediv").attr("class","form-group has-error"),pulse("type"),Metronic.scrollTo2($("#typediv"),-100)):($("#errtype").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#typediv").attr("class","form-group has-success"),"1"==a.done&&window.location.reload())))):(alert("ERROR"),!1)}}),!1}function editComment(){return $.ajax({url:"process/edit-comment.php",type:"post",dataType:"json",data:{id:$("#proid").val(),book:$("#book").val(),user:$("#user").val(),content:$("#content").val()},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("0"!=a.id?alert("ERROR"):"0"!=a.book?("1"==a.book?($("#errbook").attr({"data-original-title":"Chưa nhập id sách","class":"fa fa-warning tooltips"}),$("#bookdiv").attr("class","form-group has-warning"),pulsw("book")):"2"==a.book&&($("#errbook").attr({"data-original-title":"Không có sách này","class":"fa fa-exclamation tooltips"}),$("#bookdiv").attr("class","form-group has-error"),pulse("book")),Metronic.scrollTo2($("#bookdiv"),-100)):($("#errbook").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#bookdiv").attr("class","form-group has-success"),"0"!=a.user?("1"==a.user?($("#erruser").attr({"data-original-title":"Chưa nhập id thành viên","class":"fa fa-warning tooltips"}),$("#userdiv").attr("class","form-group has-warning"),pulsw("user")):"2"==a.user&&($("#erruser").attr({"data-original-title":"Không có thành viên này","class":"fa fa-exclamation tooltips"}),$("#userdiv").attr("class","form-group has-error"),pulse("user")),Metronic.scrollTo2($("#userdiv"),-100)):($("#erruser").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#userdiv").attr("class","form-group has-success"),"0"!=a.content?($("#errcontent").attr({"data-original-title":"Chưa nhập nội dung","class":"fa fa-exclamation tooltips"}),$("#contentdiv").attr("class","form-group has-error"),pulse("content"),Metronic.scrollTo2($("#contentdiv"),-100)):($("#errcontent").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#contentdiv").attr("class","form-group has-success"),"1"==a.done&&window.location.reload())))):(alert("ERROR"),!1)}}),!1}function editReview(){return $.ajax({url:"process/edit-review.php",type:"post",dataType:"json",data:{id:$("#proid").val(),book:$("#book").val(),user:$("#user").val(),content:$("#content").val(),rating:$("#rating").val()},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("0"!=a.id?alert("ERROR"):"0"!=a.book?("1"==a.book?($("#errbook").attr({"data-original-title":"Chưa nhập id sách","class":"fa fa-warning tooltips"}),$("#bookdiv").attr("class","form-group has-warning"),pulsw("book")):"2"==a.book&&($("#errbook").attr({"data-original-title":"Không có sách này","class":"fa fa-exclamation tooltips"}),$("#bookdiv").attr("class","form-group has-error"),pulse("book")),Metronic.scrollTo2($("#bookdiv"),-100)):($("#errbook").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#bookdiv").attr("class","form-group has-success"),"0"!=a.user?("1"==a.user?($("#erruser").attr({"data-original-title":"Chưa nhập id thành viên","class":"fa fa-warning tooltips"}),$("#userdiv").attr("class","form-group has-warning"),pulsw("user")):"2"==a.user&&($("#erruser").attr({"data-original-title":"Không có thành viên này","class":"fa fa-exclamation tooltips"}),$("#userdiv").attr("class","form-group has-error"),pulse("user")),Metronic.scrollTo2($("#userdiv"),-100)):($("#erruser").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#userdiv").attr("class","form-group has-success"),"0"!=a.rating?($("#errrating").attr({"data-original-title":"Không hợp lệ","class":"fa fa-exclamation tooltips"}),$("#ratingdiv").attr("class","form-group has-error"),pulse("rating"),Metronic.scrollTo2($("#ratingdiv"),-100)):($("#errrating").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#ratingdiv").attr("class","form-group has-success"),"0"!=a.content?($("#errcontent").attr({"data-original-title":"Chưa nhập nội dung","class":"fa fa-exclamation tooltips"}),$("#contentdiv").attr("class","form-group has-error"),pulse("content"),Metronic.scrollTo2($("#contentdiv"),-100)):($("#errcontent").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#contentdiv").attr("class","form-group has-success"),"1"==a.done&&window.location.reload()))))):(alert("ERROR"),!1)}}),!1}function delComment(a){bootbox.confirm("Bạn có chắc là muốn xóa bình luận này?",function(t){1==t&&$.ajax({url:"process/del-comment.php",type:"post",dataType:"json",data:{id:a},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void(window.location="comment-list.php"):(alert("ERROR"),!1)}})})}function delReview(a){bootbox.confirm("Bạn có chắc là muốn xóa nhận xét này?",function(t){1==t&&$.ajax({url:"process/del-review.php",type:"post",dataType:"json",data:{id:a},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void(window.location="review-list.php"):(alert("ERROR"),!1)}})})}function delProblem(a){bootbox.confirm("Bạn có chắc là muốn xóa vấn đề này?",function(t){1==t&&$.ajax({url:"process/del-problem.php",type:"post",dataType:"json",data:{id:a},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void(window.location="problem-list.php"):(alert("ERROR"),!1)}})})}function acceptRequest(a){return bootbox.confirm("Bạn có chắc là muốn xác nhận yêu cầu này?",function(t){1==t&&$.ajax({url:"process/handle-request.php",type:"post",dataType:"json",data:{id:a,type:1},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("1"==a.done&&bootbox.alert("Xác nhận yêu cầu thành công!",function(){window.location.reload()})):(alert("ERROR"),!1)}})}),!1}function dismissRequest(a){return bootbox.confirm("Bạn có chắc là muốn hủy yêu cầu này?",function(t){1==t&&$.ajax({url:"process/handle-request.php",type:"post",dataType:"json",data:{id:a,type:2},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("1"==a.done&&bootbox.alert("Hủy yêu cầu thành công!",function(){window.location.reload()})):(alert("ERROR"),!1)}})}),!1}function requested(a){return bootbox.prompt("Nhập id sách đã được đáp ứng",function(t){null===t?bootbox.alert("Lỗi!"):$.ajax({url:"process/handle-request.php",type:"post",dataType:"json",data:{id:a,type:3,idb:t},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?("0"!=a.idb&&bootbox.alert("Lỗi!"),void("1"==a.done&&bootbox.alert("Đáp ứng yêu cầu thành công!",function(){window.location.reload()}))):(alert("ERROR"),!1)}})}),!1}function acceptContribute(a){return bootbox.confirm("Bạn có chắc là muốn xác nhận đóng góp này?",function(t){1==t&&$.ajax({url:"process/handle-contribute.php",type:"post",dataType:"json",data:{id:a,type:1},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("1"==a.done&&bootbox.alert("Xác nhận đóng góp thành công!",function(){window.location.reload()})):(alert("ERROR"),!1)}})}),!1}function dismissContribute(a){return bootbox.confirm("Bạn có chắc là muốn hủy đóng góp này?",function(t){1==t&&$.ajax({url:"process/handle-contribute.php",type:"post",dataType:"json",data:{id:a,type:2},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("1"==a.done&&bootbox.alert("Hủy đóng góp thành công!",function(){window.location.reload()})):(alert("ERROR"),!1)}})}),!1}function contributed(a){return bootbox.prompt("Nhập id sách đã được đóng góp",function(t){null===t?bootbox.alert("Lỗi!"):$.ajax({url:"process/handle-contribute.php",type:"post",dataType:"json",data:{id:a,type:3,idb:t},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?("0"!=a.idb&&bootbox.alert("Lỗi!"),void("1"==a.done&&bootbox.alert("Nhận đóng góp thành công!",function(){window.location.reload()}))):(alert("ERROR"),!1)}})}),!1}function basic(){return $.ajax({url:"process/edit-basic.php",type:"post",dataType:"json",data:{title:$("#title").val(),des:$("#summernote").code(),intro:$("#summernote2").code(),term:$("#summernote3").code(),keyword:$("#keyword").val(),domain:$("#domain").val()},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("0"!=a.title?($("#errtitle").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#titlediv").attr("class","form-group has-error"),pulse("title"),Metronic.scrollTo2($("#titlediv"),-100)):($("#errtitle").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#titlediv").attr("class","form-group has-success"),"0"!=a.des?($("#errdescription").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#descriptiondiv").attr("class","form-group has-error"),pulse("description"),Metronic.scrollTo2($("#descriptiondiv"),-100)):($("#errdescription").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#descriptiondiv").attr("class","form-group has-success"),"0"!=a.intro?($("#errintroduce").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#introducediv").attr("class","form-group has-error"),pulse("introduce"),Metronic.scrollTo2($("#intrducediv"),-100)):($("#errintroduce").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#introducediv").attr("class","form-group has-success"),"0"!=a.term?($("#errterm").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#termdiv").attr("class","form-group has-error"),pulse("term"),Metronic.scrollTo2($("#termdiv"),-100)):($("#errterm").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#termdiv").attr("class","form-group has-success"),"0"!=a.keyword?($("#errkeyword").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#keyworddiv").attr("class","form-group has-error"),pulse("keyword"),Metronic.scrollTo2($("#keyworddiv"),-100)):($("#errkeyword").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#keyworddiv").attr("class","form-group has-success"),"0"!=a.domain?($("#errdomain").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#domaindiv").attr("class","form-group has-error"),pulse("domain"),Metronic.scrollTo2($("#domaindiv"),-100)):"1"==a.done&&window.location.reload())))))):(alert("ERROR"),!1)}}),!1}function info(){return $.ajax({url:"process/edit-info.php",type:"post",dataType:"json",data:{mail:$("#mail").val(),phone:$("#phone").val(),addr:$("#addr").val(),skype:$("#skype").val(),yh:$("#yh").val()},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("0"!=a.mail?($("#errmail").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#maildiv").attr("class","form-group has-error"),pulse("mail"),Metronic.scrollTo2($("#maildiv"),-100)):($("#errmail").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#maildiv").attr("class","form-group has-success"),"0"!=a.phone?($("#errphone").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#phonediv").attr("class","form-group has-error"),pulse("phone"),Metronic.scrollTo2($("#phonediv"),-100)):($("#errphone").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#phonediv").attr("class","form-group has-success"),"0"!=a.addr?($("#erraddrduce").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#addrducediv").attr("class","form-group has-error"),pulse("addrduce"),Metronic.scrollTo2($("#addrducediv"),-100)):($("#erraddrduce").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#addrducediv").attr("class","form-group has-success"),"0"!=a.skype?($("#errskype").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#skypediv").attr("class","form-group has-error"),pulse("skype"),Metronic.scrollTo2($("#skypediv"),-100)):($("#errskype").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#skypediv").attr("class","form-group has-success"),"0"!=a.yh?($("#erryh").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#yhdiv").attr("class","form-group has-error"),pulse("yh"),Metronic.scrollTo2($("#yhdiv"),-100)):"1"==a.done&&window.location.reload()))))):(alert("ERROR"),!1)}}),!1}function social(){return $.ajax({url:"process/edit-social.php",type:"post",dataType:"json",data:{admin:$("#admin").val(),page:$("#page").val(),app:$("#app").val(),gcs:$("#gcseid").val(),gkey:$("#gkey").val()},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("0"!=a.admin?($("#erradmin").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#admindiv").attr("class","form-group has-error"),pulse("admin"),Metronic.scrollTo2($("#admindiv"),-100)):($("#erradmin").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#admindiv").attr("class","form-group has-success"),"0"!=a.page?($("#errpage").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#pagediv").attr("class","form-group has-error"),pulse("page"),Metronic.scrollTo2($("#pagediv"),-100)):($("#errpage").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#pagediv").attr("class","form-group has-success"),"0"!=a.app?($("#errapp").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#appdiv").attr("class","form-group has-error"),pulse("app"),Metronic.scrollTo2($("#appdiv"),-100)):($("#errapp").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#appdiv").attr("class","form-group has-success"),"0"!=a.gcs?($("#errgcs").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#gcsdiv").attr("class","form-group has-error"),pulse("gcs"),Metronic.scrollTo2($("#gcsdiv"),-100)):($("#errgcs").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#gcsdivdiv").attr("class","form-group has-success"),"0"!=a.gkey?($("#errgkey").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#gkeydiv").attr("class","form-group has-error"),pulse("gkey"),Metronic.scrollTo2($("#gkeydiv"),-100)):($("#errgkey").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#gkeydiv").attr("class","form-group has-success"),"1"==a.done&&window.location.reload())))))):(alert("ERROR"),!1)}}),!1}function slide(){return $.ajax({url:"process/edit-slide.php",type:"post",dataType:"json",data:{slide1:$("#slide1").val(),slide2:$("#slide2").val()},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("0"!=a.slide1?($("#errslide1").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#slide1div").attr("class","form-group has-error"),pulse("slide1"),Metronic.scrollTo2($("#slide1div"),-100)):($("#errslide1").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#slide1div").attr("class","form-group has-success"),"0"!=a.slide2?($("#errslide2").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#slide2div").attr("class","form-group has-error"),pulse("slide2"),Metronic.scrollTo2($("#slide2div"),-100)):($("#errslide2").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#slide2div").attr("class","form-group has-success"),"1"==a.done&&window.location.reload()))):(alert("ERROR"),!1)}}),!1}function borrow(){return $.ajax({url:"process/edit-borrow.php",type:"post",dataType:"json",data:{inorder:$("#inorder").val(),dayorder:$("#dayorder").val()},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("0"!=a.inorder?($("#errinorder").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#inorderdiv").attr("class","form-group has-error"),pulse("inorder"),Metronic.scrollTo2($("#inorderdiv"),-100)):($("#errinorder").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#inorderdiv").attr("class","form-group has-success"),"0"!=a.dayorder?($("#errdayorder").attr({"data-original-title":"Lỗi","class":"fa fa-error tooltips"}),$("#dayorderdiv").attr("class","form-group has-error"),pulse("dayorder"),Metronic.scrollTo2($("#dayorderdiv"),-100)):($("#errdayorder").attr({"data-original-title":"Hợp lệ","class":"fa fa-check tooltips"}),$("#dayorderdiv").attr("class","form-group has-success"),"1"==a.done&&window.location.reload()))):(alert("ERROR"),!1)}}),!1}function adminLogout(){return bootbox.confirm("Bạn có chắc là muốn đăng xuất?",function(a){1==a&&$.ajax({url:"process/logout.php",success:function(){window.location="/admin"}})}),!1}var Book=function(){var a=function(){var a=new Datatable;a.init({src:$("#datatable_products"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,200],[20,50,100,150,200]],pageLength:20,ajax:{url:"process/get-book.php"},order:[[1,"desc"]]}}),a.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var e=$(".table-group-action-input",a.getTableWrapper());""!=e.val()&&a.getSelectedRowsCount()>0?(a.setAjaxParam("customActionType","group_action"),a.setAjaxParam("customActionValue",e.val()),a.setAjaxParam("id",a.getSelectedRows()),a.getDataTable().ajax.reload(),a.clearAjaxParams()):""==e.val()?Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một hành động",container:a.getTableWrapper(),place:"prepend"}):0===a.getSelectedRowsCount()&&Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một sách",container:a.getTableWrapper(),place:"prepend"})})};return{init:function(){a()}}}(),BookEdit=function(){var a=function(){var a=new Datatable;a.setAjaxParam("bid",$("#bookid").val()),a.init({src:$("#datatable_reviews"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,-1],[20,50,100,150,"All"]],pageLength:20,ajax:{url:"process/get-review.php"},order:[[1,"desc"]]}}),a.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var e=$(".table-group-action-input",a.getTableWrapper());""!=e.val()&&a.getSelectedRowsCount()>0?(a.setAjaxParam("customActionType","group_action"),a.setAjaxParam("customActionValue",e.val()),a.setAjaxParam("id",a.getSelectedRows()),a.getDataTable().ajax.reload(),a.clearAjaxParams(),a.setAjaxParam("bid",$("#bookid").val())):""==e.val()?Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một hành động",container:a.getTableWrapper(),place:"prepend"}):0===a.getSelectedRowsCount()&&Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một sách",container:a.getTableWrapper(),place:"prepend"})})},t=function(){var a=new Datatable;a.setAjaxParam("bid",$("#bookid").val()),a.init({src:$("#datatable_comments"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,-1],[20,50,100,150,"All"]],pageLength:20,ajax:{url:"process/get-comment.php"},order:[[1,"desc"]]}}),a.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var e=$(".table-group-action-input",a.getTableWrapper());""!=e.val()&&a.getSelectedRowsCount()>0?(a.setAjaxParam("customActionType","group_action"),a.setAjaxParam("customActionValue",e.val()),a.setAjaxParam("id",a.getSelectedRows()),a.getDataTable().ajax.reload(),a.clearAjaxParams(),a.setAjaxParam("bid",$("#bookid").val())):""==e.val()?Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một hành động",container:a.getTableWrapper(),place:"prepend"}):0===a.getSelectedRowsCount()&&Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một sách",container:a.getTableWrapper(),place:"prepend"})})},e=function(){var a=new Datatable;a.setAjaxParam("bid",$("#bookid").val()),a.init({src:$("#datatable_history"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,-1],[20,50,100,150,"All"]],pageLength:20,ajax:{url:"process/get-eachorder.php"},order:[[1,"desc"]]}})},o=function(){$(".date-picker").datepicker({rtl:Metronic.isRTL(),autoclose:!0})},r=function(){jQuery().tagsInput&&$('[name="book[keyword]"]').tagsInput({width:"auto",onAddTag:function(){}})};return{init:function(){o(),a(),t(),e(),r(),$("#bookkeyword_tagsinput").attr("class","form-control tagsinput")}}}(),FormWizard=function(){return{init:function(){if(jQuery().bootstrapWizard&&jQuery().tagsInput){$(".date-picker").datepicker({rtl:Metronic.isRTL(),autoclose:!0}),$('[name="book[keyword]"]').tagsInput({width:"auto",onAddTag:function(){}}),$("#bookkeyword_tagsinput").attr("class","form-control tagsinput");var a=$("#form_wizard_1"),t=function(){$("#tab4 .form-control-static",a).each(function(){var t=$('[name="'+$(this).attr("data-display")+'"]',a);if(t.is(":radio")&&(t=$('[name="'+$(this).attr("data-display")+'"]:checked',a)),"book[description]"==$(this).attr("data-display"))$(this).html(t.code());else if("book[label]"==$(this).attr("data-display")){var e=[];$('[name="book[label][hot]"]').is(":checked")&&e.push("Hot"),$('[name="book[label][new]"]').is(":checked")&&e.push("New"),$(this).html(e.join("<br/>"))}else t.is(":text")||t.is("textarea")?$(this).html(t.val()):t.is("select")?$(this).html(t.find("option:selected").text()):(t.is(":radio")||t.is(":checkbox"))&&t.is(":checked")&&$(this).html(t.attr("data-title"))});var t='<img src="../../135x180/'+$('[name="book[images][1]"]').val()+'" class="thumbnail" style="display: inline-block; margin: 5px 2px;" width="145px" height="190px"></a>';null!=$('[name="book[images][2]"]').val()&&(t+='<img src="../../135x180/'+$('[name="book[images][2]"]').val()+'" class="thumbnail" style="display: inline-block; margin: 5px 2px;" width="145px" height="190px"></a>'),null!=$('[name="book[images][3]"]').val()&&(t+='<img src="../../135x180/'+$('[name="book[images][3]"]').val()+'" class="thumbnail" style="display: inline-block; margin: 5px 2px;" width="145px" height="190px"></a>'),null!=$('[name="book[images][4]"]').val()&&(t+='<img src="../../135x180/'+$('[name="book[images][4]"]').val()+'" class="thumbnail" style="display: inline-block; margin: 5px 2px;" width="145px" height="190px"></a>'),null!=$('[name="book[images][5]"]').val()&&(t+='<img src="../../135x180/'+$('[name="book[images][5]"]').val()+'" class="thumbnail" style="display: inline-block; margin: 5px 2px;" width="145px" height="190px"></a>'),null!=$('[name="book[images][6]"]').val()&&(t+='<img src="../../135x180/'+$('[name="book[images][6]"]').val()+'" class="thumbnail" style="display: inline-block; margin: 5px 2px;" width="145px" height="190px"></a>'),$("#bookimageconfirm").html(t);for(var e=str2num($("#countproofread tr:last td:first").html()),o="",r="",i=1;e>=i;i++)r=""!=$("#proofreaddes"+i).attr("value")?$("#proofreaddes"+i).attr("value"):"Không có chú thích",o+='<div class="thumbnail" style="display: inline-block; margin: 5px 2px;"><img src="../../135x180/'+$("#proofreadtext"+i).attr("value")+'" width="135px" height="180px"/><div class="caption" style="width: 135px;">'+r+"</div></div>";$("#bookproofreadconfirm").html(o)},e=function(e,o,r){var i=o.find("li").length,n=r+1;$(".step-title",a).text("Bước "+n+"/"+i),jQuery("li",a).removeClass("done");for(var s=o.find("li"),l=0;r>l;l++)jQuery(s[l]).addClass("done");1==n?a.find(".button-previous").hide():a.find(".button-previous").show(),n>=i?(a.find(".button-next").hide(),a.find(".button-submit").show(),t()):(a.find(".button-next").show(),a.find(".button-submit").hide()),Metronic.scrollTo($(".page-title"))},o=function(t){var e=$("#click").find("li").length;$(".step-title",a).text("Bước "+t+"/"+e),jQuery("li",$("#click")).removeClass("done").removeClass("active");for(var o=a.find("li"),r=0;t-1>r;r++)jQuery(o[r]).addClass("done");jQuery(o[t-1]).addClass("active"),$(".tab-pane",$(".tab-content")).removeClass("active"),$("#tab"+t,$(".tab-content")).addClass("active");var i=t/e*100;a.find(".progress-bar").css({width:i+"%"})},r=function(a){var t;switch(a){case 1:$.ajax({url:"process/create-book.php",type:"post",dataType:"json",async:!1,data:{tab:1,bookid:$('[name="book[id]"]').val(),bookname:$('[name="book[name]"]').val(),bookdescription:$('[name="book[description]"]').code(),bookshortdescription:$('[name="book[short-description]"]').val(),bookkeyword:$('[name="book[keyword]"]').val(),bookcate:$('[name="book[cate]"]:checked').val(),bookbcode:$('[name="book[bcode]"]').val(),booknumber:$('[name="book[number]"]').val(),bookauthor:$('[name="book[author]"]').val(),bookpublisher:$('[name="book[publisher]"]').val(),bookpublishtime:$('[name="book[publish-time]"]').val(),bookpagen:$('[name="book[pagen]"]').val(),booklang:$('[name="book[lang]"]').val(),booklabelnew:$('[name="book[label][new]"]:checked').val(),booklabelhot:$('[name="book[label][hot]"]:checked').val()},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?("0"!=a.bookname?($("#errname").attr({"data-original-title":"Chưa nhập tên sách","class":"fa fa-warning tooltips"}),$("#namediv").attr("class","form-group has-warning"),pulsw("bookname"),Metronic.scrollTo2($("#namediv"),-100)):($("#errname").attr({"data-original-title":"Chưa nhập tên sách","class":"fa fa-info-circle tooltips"}),$("#namediv").attr("class","form-group"),"0"!=a.bookdescription?($(".note-editor").attr("id","bookdescription"),$("#errdescription").attr({"data-original-title":"Chưa nhập mô tả","class":"fa fa-warning tooltips"}),$("#descriptiondiv").attr("class","form-group has-warning"),pulsw("bookdescription"),Metronic.scrollTo2($("#namediv"),-100)):($("#errdescription").attr({"data-original-title":"Chưa nhập mô tả","class":"fa fa-info-circle tooltips"}),$("#descriptiondiv").attr("class","form-group"),"0"!=a.bookshortdescription?($("#errshortdescription").attr({"data-original-title":"Chưa nhập mô tả ngắn","class":"fa fa-warning tooltips"}),$("#shortdescriptiondiv").attr("class","form-group has-warning"),pulsw("bookshortdescription"),Metronic.scrollTo2($("#shortdescriptiondiv"),-100)):($("#errshortdescription").attr({"data-original-title":"Chưa nhập mô tả ngắn","class":"fa fa-info-circle tooltips"}),$("#shortdescriptiondiv").attr("class","form-group"),"0"!=a.bookkeyword?($("#errkeyword").attr({"data-original-title":"Chưa nhập từ khóa","class":"fa fa-warning tooltips"}),$("#keyworddiv").attr("class","form-group has-warning"),pulsw("bookkeyword_tagsinput"),Metronic.scrollTo2($("#keyworddiv"),-100)):($("#errkeyword").attr({"data-original-title":"Chưa nhập từ khóa","class":"fa fa-info-circle tooltips"}),$("#keyworddiv").attr("class","form-group"),"0"!=a.bookcate?("1"==a.bookcate?($("#errcate").attr({"data-original-title":"Chưa chọn danh mục","class":"fa fa-warning tooltips"}),$("#catediv").attr("class","form-group has-warning"),pulsw("bookcate")):"2"==a.bookcate&&($("#errcate").attr({"data-original-title":"Danh mục này không có thật","class":"fa fa-exclamation tooltips"}),$("#catediv").attr("class","form-group has-error"),pulse("bookcate")),Metronic.scrollTo2($("#catediv"),-100)):($("#errcate").attr({"data-original-title":"Danh mục này không có thật","class":"fa fa-info-circle tooltips"}),$("#catediv").attr("class","form-group"),"0"!=a.bookbcode?("1"==a.bookbcode?($("#errbcode").attr({"data-original-title":"Chưa nhập mã sách","class":"fa fa-warning tooltips"}),$("#bcodediv").attr("class","form-group has-warning"),pulsw("bookbcode")):"2"==a.bookbcode&&($("#errbcode").attr({"data-original-title":"Mã sách này đã bị trùng","class":"fa fa-exclamation tooltips"}),$("#bcodediv").attr("class","form-group has-error"),pulse("bookbcode")),Metronic.scrollTo2($("#bcodediv"),-100)):($("#errbcode").attr({"data-original-title":"Chưa nhập mã sách","class":"fa fa-info-circle tooltips"}),$("#bcodediv").attr("class","form-group"),"0"!=a.booknumber?("1"==a.booknumber?($("#errnumber").attr({"data-original-title":"Chưa nhập số lượng sách","class":"fa fa-warning tooltips"}),$("#numberdiv").attr("class","form-group has-warning"),pulsw("booknumber")):"2"==a.booknumber&&($("#errnumber").attr({"data-original-title":"Số lượng sách chỉ gồm số (0-9)","class":"fa fa-exclamation tooltips"}),$("#numberdiv").attr("class","form-group has-error"),pulse("booknumber")),Metronic.scrollTo2($("#numberdiv"),-100)):($("#errnumber").attr({"data-original-title":"Số lượng sách chỉ gồm số (0-9)","class":"fa fa-info-circle tooltips"}),$("#numberdiv").attr("class","form-group"),"0"!=a.bookauthor?($("#errauthor").attr({"data-original-title":"Chưa nhập tác giả","class":"fa fa-warning tooltips"}),$("#authordiv").attr("class","form-group has-warning"),pulsw("bookauthor"),Metronic.scrollTo2($("#authordiv"),-100)):($("#errauthor").attr({"data-original-title":"Chưa nhập tác giả","class":"fa fa-info-circle tooltips"}),$("#authordiv").attr("class","form-group"),"0"!=a.bookpagen?("1"==a.bookpagen?($("#errpagen").attr({"data-original-title":"Chưa nhập số trang sách","class":"fa fa-warning tooltips"}),$("#pagendiv").attr("class","form-group has-warning"),pulsw("bookpagen")):"2"==a.bookpagen&&($("#errpagen").attr({"data-original-title":"Số trang sách chỉ gồm số (0-9)","class":"fa fa-exclamation tooltips"}),$("#pagendiv").attr("class","form-group has-error"),pulse("bookpagen")),Metronic.scrollTo2($("#pagendiv"),-100)):($("#errpagen").attr({"data-original-title":"Số trang sách chỉ gồm số (0-9)","class":"fa fa-info-circle tooltips"}),$("#pagendiv").attr("class","form-group"),"0"!=a.booklang?("1"==a.booklang?($("#errlang").attr({"data-original-title":"Chưa chọn ngôn ngữ","class":"fa fa-warning tooltips"}),$("#langdiv").attr("class","form-group has-warning"),pulsw("booklang")):"2"==a.booklang&&($("#errlang").attr({"data-original-title":"Ngôn ngữ này không có thật","class":"fa fa-exclamation tooltips"}),$("#langdiv").attr("class","form-group has-error"),pulse("booklang")),Metronic.scrollTo2($("#langdiv"),-100)):($("#errlang").attr({"data-original-title":"Ngôn ngữ này không có thật","class":"fa fa-info-circle tooltips"}),$("#langdiv").attr("class","form-group"))))))))))),void(t="1"==a.done?!0:!1)):(alert("ERROR"),!1)
}});break;case 2:$.ajax({url:"process/create-book.php",type:"post",dataType:"json",async:!1,data:{tab:2,bookimages1:$('[name="book[images][1]"]').val()},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?(0!=a.bookimages1?($("#errbookimages1").attr({"data-original-title":"Ảnh đầu tiên là bắt buộc","class":"fa fa-warning tooltips"}),$("#bookimages1div").attr("class","has-warning"),pulsw("bookimagetext1"),Metronic.scrollTo2($("#langdiv"),-100)):($("#errbookimages1").attr({"data-original-title":"Ảnh đầu tiên là bắt buộc","class":"fa fa-info-circle tooltips"}),$("#bookimages1div").attr("class","")),void(t="1"==a.done?!0:!1)):(alert("ERROR"),!1)}});break;case 3:t=!0}return t};a.bootstrapWizard({nextSelector:".button-next",previousSelector:".button-previous",onTabClick:function(a,t,i,n){if(i+1==n){if(0==r(i+1))return!1;e(a,t,n)}else if(n>i+1){for(var s=i+1;n>=s;s++)if(0==r(s))return i+1!=s&&o(s),!1;e(a,t,n)}else i>n&&e(a,t,n)},onPrevious:function(a,t,o){e(a,t,o)},onNext:function(a,t,o){return 0==r(o)?!1:void e(a,t,o)},onTabShow:function(t,e,o){var r=e.find("li").length,i=o+1,n=i/r*100;a.find(".progress-bar").css({width:n+"%"})}}),$(".button-submit",a).click(function(){$.ajax({url:"process/create-book.php",type:"post",dataType:"json",data:{tab:69,bookid:$('[name="book[id]"]').val(),bookname:$('[name="book[name]"]').val(),bookdescription:$('[name="book[description]"]').code(),bookshortdescription:$('[name="book[short-description]"]').val(),bookkeyword:$('[name="book[keyword]"]').val(),bookcate:$('[name="book[cate]"]:checked').val(),bookbcode:$('[name="book[bcode]"]').val(),booknumber:$('[name="book[number]"]').val(),bookauthor:$('[name="book[author]"]').val(),bookpublisher:$('[name="book[publisher]"]').val(),bookpublishtime:$('[name="book[publish-time]"]').val(),bookpagen:$('[name="book[pagen]"]').val(),booklang:$('[name="book[lang]"]').val(),booklabelnew:$('[name="book[label][new]"]:checked').val(),booklabelhot:$('[name="book[label][hot]"]:checked').val(),bookimages1:$('[name="book[images][1]"]').val(),bookimages2:$('[name="book[images][2]"]').val(),bookimages3:$('[name="book[images][3]"]').val(),bookimages4:$('[name="book[images][4]"]').val(),bookimages5:$('[name="book[images][5]"]').val(),bookimages6:$('[name="book[images][6]"]').val(),bookproofread:$('[name="book[proofread]"]').val()},success:function(a){return a.hasOwnProperty("error")&&"success"==a.error?void("1"==a.done&&Metronic.alert({type:"success",icon:"check",message:"Đã thêm sách mới",place:"prepend"})):(alert("ERROR"),!1)}})})}}}}();$.fn.EasyTree=function(a){var t={selectable:!0,deletable:!1,editable:!1,addable:!1,i18n:{collapseTip:"Thu nhỏ danh mục",expandTip:"Mở rộng danh mục",selectTip:"Chọn danh mục",unselectTip:"Bỏ chọn danh mục",editTip:"Chỉnh sửa danh mục",addTip:"Thêm danh mục",deleteTip:"Xóa danh mục"}},e=$('<div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong></strong><span class="alert-content"></span></div>'),o=$('<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong></strong><span class="alert-content"></span></div>'),r=$('<div class="alert alert-success alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong></strong><span class="alert-content"></span></div>');a=$.extend(t,a),this.each(function(){var t=$(this);$.each($(t).find("ul > li"),function(){var a,t,e;if($(this).is("li:has(ul)")){var o=$(this).find(" > ul");$(o).remove(),a=$(this).text(),t=$(this).attr("data-type"),e=$(this).attr("data-id"),$(this).html('<span><span class="glyphicon"></span><a href="javascript: void(0);"></a> </span><div style="display: inline-block;float: right;margin-top: 7px;"><button onclick="window.location=&#39;cate-create.php?cid='+e+'&#39;" class="btn btn-success btn-circle" style="font-size: 10px; padding: 2px 2px;"><i class="fa fa-plus"></i></button> <button onclick="window.location=&#39;cate-edit.php?id='+e+"&type="+t+'&#39;" class="btn btn-primary btn-circle" style="font-size: 10px; padding: 2px 2px;"><i class="fa fa-edit"></i></button> <button onclick="delCate2('+e+","+t+')" class="btn btn-danger btn-circle" style="font-size: 10px; padding: 2px 2px;"><i class="fa fa-remove"></i></button></div><hr style="margin-top: 5px;margin-bottom: 0;">'),$(this).find(" > span > span").addClass("glyphicon-folder-open"),$(this).find(" > span > a").text(a),$(this).append(o)}else a=$(this).text(),t=$(this).attr("data-type"),e=$(this).attr("data-id"),id2=$(this).parents("li").attr("data-id"),$(this).html('<span><span class="glyphicon"></span><a href="javascript: void(0);"></a> </span><div style="display: inline-block;float: right;margin-top: 7px;"><button onclick="window.location=&#39;cate-create.php?cid='+id2+'&#39;" class="btn btn-success btn-circle" style="font-size: 10px; padding: 2px 2px;"><i class="fa fa-plus"></i></button> <button onclick="window.location=&#39;cate-edit.php?id='+e+"&type="+t+'&#39;" class="btn btn-primary btn-circle" style="font-size: 10px; padding: 2px 2px;"><i class="fa fa-edit"></i></button> <button onclick="delCate2('+e+","+t+')" class="btn btn-danger btn-circle" style="font-size: 10px; padding: 2px 2px;"><i class="fa fa-remove"></i></button></div><hr style="margin-top: 5px;margin-bottom: 0;">'),$(this).find(" > span > span").addClass("glyphicon-file"),$(this).find(" > span > a").text(a)}),$(t).find("li:has(ul)").addClass("parent_li").find(" > span").attr("title",a.i18n.collapseTip),a.addable&&($(".easy-tree-toolbar").append('<span class="create"><button class="btn btn-success btn-circle" style="font-size: 13px; padding: 5px 10px;"><i class="fa fa-plus"></i> Thêm</button></span> '),$(".easy-tree-toolbar .create > button").attr("title",a.i18n.addTip).click(function(){if(i().length>0){var a;"1"==i().attr("data-type")?a=i().attr("data-id"):"2"==i().attr("data-type")&&(a=i().parents("li").attr("data-id")),window.location="cate-create.php?cid="+a}else window.location="cate-create.php"})),a.editable&&($(".easy-tree-toolbar").append('<span class="edit"><button class="btn btn-primary btn-circle disabled" style="font-size: 13px; padding: 5px 10px;"><i class="fa fa-edit"></i> Sửa</button></span> '),$(".easy-tree-toolbar .edit > button").attr("title",a.i18n.editTip).click(function(){if(i().length>0){var a;"1"==i().attr("data-type")?a="1":"2"==i().attr("data-type")&&(a="2");var t=i().attr("data-id");window.location="cate-edit.php?id="+t+"&type="+a}})),a.deletable&&($(".easy-tree-toolbar").append('<span class="remove"><button class="btn btn-danger btn-circle disabled" style="font-size: 13px; padding: 5px 10px;"><i class="fa fa-remove"></i> Xóa</button></span> '),$(".easy-tree-toolbar .remove > button").attr("title",a.i18n.deleteTip).click(function(){var a=i();if(a.length<=0)$(r).remove(),$(t).prepend(e),$(t).find(".alert .alert-content").html("Chọn một danh mục để xóa");else{if("1"==a.attr("data-type"))var n="1";else if("2"==a.attr("data-type"))var n="2";var s=a.attr("data-id");bootbox.confirm("Bạn có chắc là muốn xóa danh mục này?",function(e){1==e&&$.ajax({url:"process/del-cate.php",type:"post",dataType:"json",data:{id:s,type:n},success:function(e){return e.hasOwnProperty("error")&&"success"==e.error?($(a).find(" ul ").remove(),$(a).parent("ul").find(" > li").length<=1&&($(a).parents("li").removeClass("parent_li").find(" > span > span").removeClass("glyphicon-folder-open").addClass("glyphicon-file"),$(a).parent("ul").remove()),$(a).remove(),$(o).remove(),$(t).prepend(r),$(t).find(".alert .alert-content").html("Xóa thành công"),$(".easy-tree-toolbar .edit > button").addClass("disabled"),$(".easy-tree-toolbar .remove > button").addClass("disabled"),void 0):(alert("ERROR"),!1)}})})}})),$(t).delegate("li.parent_li > span","click",function(t){var e=$(this).parent("li.parent_li").find(" > ul > li");e.is(":visible")?(e.hide("fast"),$(this).attr("title",a.i18n.expandTip).find(" > span.glyphicon").addClass("glyphicon-folder-close").removeClass("glyphicon-folder-open")):(e.show("fast"),$(this).attr("title",a.i18n.collapseTip).find(" > span.glyphicon").addClass("glyphicon-folder-open").removeClass("glyphicon-folder-close")),t.stopPropagation()}),a.selectable&&($(t).find("li > span > a").attr("title",a.i18n.selectTip),$(t).find("li > span > a").click(function(e){var o=$(this).parent().parent();if(o.hasClass("li_selected")?($(this).attr("title",a.i18n.selectTip),$(o).removeClass("li_selected")):($(t).find("li.li_selected").removeClass("li_selected"),$(this).attr("title",a.i18n.unselectTip),$(o).addClass("li_selected")),a.deletable||a.editable||a.addable){var r=i();a.editable&&(r.length<=0||r.length>1?$(".easy-tree-toolbar .edit > button").addClass("disabled"):$(".easy-tree-toolbar .edit > button").removeClass("disabled")),a.deletable&&(r.length<=0||r.length>1?$(".easy-tree-toolbar .remove > button").addClass("disabled"):$(".easy-tree-toolbar .remove > button").removeClass("disabled"))}e.stopPropagation()}));var i=function(){return $(t).find("li.li_selected")}})};var CreateCate=function(){var a=function(){jQuery().tagsInput&&$('[name="catekeyword"]').tagsInput({width:"auto",onAddTag:function(){}})};return{init:function(){a(),$("#catekeyword_tagsinput").attr("class","form-control tagsinput")}}}(),UserList=function(){var a=function(){var a=new Datatable;a.init({src:$("#datatable_users"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,200],[20,50,100,150,200]],pageLength:20,ajax:{url:"process/get-user.php"},order:[[1,"desc"]]}}),a.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var e=$(".table-group-action-input",a.getTableWrapper());""!=e.val()&&a.getSelectedRowsCount()>0?(a.setAjaxParam("customActionType","group_action"),a.setAjaxParam("customActionValue",e.val()),a.setAjaxParam("id",a.getSelectedRows()),a.getDataTable().ajax.reload(),a.clearAjaxParams()):""==e.val()?Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một hành động",container:a.getTableWrapper(),place:"prepend"}):0===a.getSelectedRowsCount()&&Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một sách",container:a.getTableWrapper(),place:"prepend"})})};return{init:function(){a()}}}(),UserEdit=function(){var a=function(){var a=new Datatable;a.setAjaxParam("userid",$("#userid").val()),a.init({src:$("#datatable_wishlist"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,-1],[20,50,100,150,"All"]],pageLength:20,ajax:{url:"process/get-wishlist.php"},order:[[3,"desc"]]}}),a.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var e=$(".table-group-action-input",a.getTableWrapper());""!=e.val()&&a.getSelectedRowsCount()>0?(a.setAjaxParam("customActionType","group_action"),a.setAjaxParam("customActionValue",e.val()),a.setAjaxParam("id",a.getSelectedRows()),a.getDataTable().ajax.reload(),a.clearAjaxParams(),a.setAjaxParam("userid",$("#userid").val())):""==e.val()?Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một hành động",container:a.getTableWrapper(),place:"prepend"}):0===a.getSelectedRowsCount()&&Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một sách yêu thích",container:a.getTableWrapper(),place:"prepend"})})},t=function(){var a=new Datatable;a.setAjaxParam("userid",$("#userid").val()),a.init({src:$("#datatable_request"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,-1],[20,50,100,150,"All"]],pageLength:20,ajax:{url:"process/get-request.php"},order:[[3,"desc"]]}}),a.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var e=$(".table-group-action-input",a.getTableWrapper());""!=e.val()&&a.getSelectedRowsCount()>0?(a.setAjaxParam("customActionType","group_action"),a.setAjaxParam("customActionValue",e.val()),a.setAjaxParam("id",a.getSelectedRows()),a.getDataTable().ajax.reload(),a.clearAjaxParams(),a.setAjaxParam("userid",$("#userid").val())):""==e.val()?Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một hành động",container:a.getTableWrapper(),place:"prepend"}):0===a.getSelectedRowsCount()&&Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một yêu cầu sách",container:a.getTableWrapper(),place:"prepend"})})},e=function(){var a=new Datatable;a.setAjaxParam("userid",$("#userid").val()),a.init({src:$("#datatable_contribute"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,-1],[20,50,100,150,"All"]],pageLength:20,ajax:{url:"process/get-contribute.php"},order:[[1,"desc"]]}}),a.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var e=$(".table-group-action-input",a.getTableWrapper());""!=e.val()&&a.getSelectedRowsCount()>0?(a.setAjaxParam("customActionType","group_action"),a.setAjaxParam("customActionValue",e.val()),a.setAjaxParam("id",a.getSelectedRows()),a.getDataTable().ajax.reload(),a.clearAjaxParams(),a.setAjaxParam("userid",$("#userid").val())):""==e.val()?Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một hành động",container:a.getTableWrapper(),place:"prepend"}):0===a.getSelectedRowsCount()&&Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một đóng góp sách",container:a.getTableWrapper(),place:"prepend"})})},o=function(){var a=new Datatable;a.setAjaxParam("userid",$("#userid").val()),a.init({src:$("#datatable_order"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,-1],[20,50,100,150,"All"]],pageLength:20,ajax:{url:"process/get-order.php"},order:[[1,"desc"]]}}),a.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var e=$(".table-group-action-input",a.getTableWrapper());""!=e.val()&&a.getSelectedRowsCount()>0?(a.setAjaxParam("customActionType","group_action"),a.setAjaxParam("customActionValue",e.val()),a.setAjaxParam("id",a.getSelectedRows()),a.getDataTable().ajax.reload(),a.clearAjaxParams(),a.setAjaxParam("userid",$("#userid").val())):""==e.val()?Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một hành động",container:a.getTableWrapper(),place:"prepend"}):0===a.getSelectedRowsCount()&&Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một đơn hàng",container:a.getTableWrapper(),place:"prepend"})})},r=function(){var a=new Datatable;a.setAjaxParam("userid",$("#userid").val()),a.init({src:$("#datatable_reviews"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,-1],[20,50,100,150,"All"]],pageLength:20,ajax:{url:"process/get-review2.php"},order:[[1,"desc"]]}}),a.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var e=$(".table-group-action-input",a.getTableWrapper());""!=e.val()&&a.getSelectedRowsCount()>0?(a.setAjaxParam("customActionType","group_action"),a.setAjaxParam("customActionValue",e.val()),a.setAjaxParam("id",a.getSelectedRows()),a.getDataTable().ajax.reload(),a.clearAjaxParams()):""==e.val()?Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một hành động",container:a.getTableWrapper(),place:"prepend"}):0===a.getSelectedRowsCount()&&Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một sách",container:a.getTableWrapper(),place:"prepend"})})},i=function(){var a=new Datatable;a.setAjaxParam("userid",$("#userid").val()),a.init({src:$("#datatable_comments"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,-1],[20,50,100,150,"All"]],pageLength:20,ajax:{url:"process/get-comment2.php"},order:[[1,"desc"]]}}),a.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var e=$(".table-group-action-input",a.getTableWrapper());""!=e.val()&&a.getSelectedRowsCount()>0?(a.setAjaxParam("customActionType","group_action"),a.setAjaxParam("customActionValue",e.val()),a.setAjaxParam("id",a.getSelectedRows()),a.getDataTable().ajax.reload(),a.clearAjaxParams(),a.setAjaxParam("userid",$("#userid").val())):""==e.val()?Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một hành động",container:a.getTableWrapper(),place:"prepend"}):0===a.getSelectedRowsCount()&&Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một sách",container:a.getTableWrapper(),place:"prepend"})})},n=function(){$(".date-picker").datepicker({rtl:Metronic.isRTL(),autoclose:!0})};return{init:function(){n(),a(),t(),e(),o(),r(),i()}}}(),Order=function(){var a=function(){var a=new Datatable;a.init({src:$("#datatable_order"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,200],[20,50,100,150,200]],pageLength:20,ajax:{url:"process/get-order2.php"},order:[[1,"desc"]]}}),a.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var e=$(".table-group-action-input",a.getTableWrapper());""!=e.val()&&a.getSelectedRowsCount()>0?(a.setAjaxParam("customActionType","group_action"),a.setAjaxParam("customActionValue",e.val()),a.setAjaxParam("id",a.getSelectedRows()),a.getDataTable().ajax.reload(),a.clearAjaxParams()):""==e.val()?Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một hành động",container:a.getTableWrapper(),place:"prepend"}):0===a.getSelectedRowsCount()&&Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một đơn sách",container:a.getTableWrapper(),place:"prepend"})})};return{init:function(){a()}}}(),Problem=function(){var a=function(){var a=new Bloodhound({datumTokenizer:function(a){return a.tokens},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:"process/select-book.php?q=%QUERY"});a.initialize(),$("#book").typeahead(null,{name:"book",displayKey:"id",source:a.ttAdapter(),hint:!0,templates:{suggestion:Handlebars.compile(['<div class="media">','<div class="pull-left">','<div class="media-object">','<img src="../../50x67/{{img1}}"/>',"</div>","</div>",'<div class="media-body">','<h4 class="media-heading">{{title}}</h4>','<p style="margin-bottom: 5px">{{id}}</p>',"<p>{{cate}}</p>","</div>","</div>"].join(""))}})},t=function(){var a=new Bloodhound({datumTokenizer:function(a){return a.tokens},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:"process/select-user.php?q=%QUERY"});a.initialize(),$("#user").typeahead(null,{name:"user",displayKey:"id",source:a.ttAdapter(),hint:!0,templates:{suggestion:Handlebars.compile(['<div class="media">','<div class="pull-left">','<div class="media-object">','<img src="../../50x67/{{image}}"/>',"</div>","</div>",'<div class="media-body">','<h4 class="media-heading">{{name}}</h4>','<p style="margin-bottom: 5px">{{id}}</p>',"<p>{{scode}}</p>","</div>","</div>"].join(""))}})};return{init:function(){a(),t()}}}(),ProblemList=function(){var a=function(){var a=new Datatable;a.init({src:$("#datatable_problems"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,200],[20,50,100,150,200]],pageLength:20,ajax:{url:"process/get-problem.php"},order:[[1,"desc"]]}}),a.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var e=$(".table-group-action-input",a.getTableWrapper());""!=e.val()&&a.getSelectedRowsCount()>0?(a.setAjaxParam("customActionType","group_action"),a.setAjaxParam("customActionValue",e.val()),a.setAjaxParam("id",a.getSelectedRows()),a.getDataTable().ajax.reload(),a.clearAjaxParams()):""==e.val()?Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một hành động",container:a.getTableWrapper(),place:"prepend"}):0===a.getSelectedRowsCount()&&Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một vấn đề",container:a.getTableWrapper(),place:"prepend"})})};return{init:function(){a()}}}(),CommentList=function(){var a=function(){var a=new Datatable;a.init({src:$("#datatable_comments"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,200],[20,50,100,150,200]],pageLength:20,ajax:{url:"process/get-comment3.php"},order:[[1,"desc"]]}}),a.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var e=$(".table-group-action-input",a.getTableWrapper());""!=e.val()&&a.getSelectedRowsCount()>0?(a.setAjaxParam("customActionType","group_action"),a.setAjaxParam("customActionValue",e.val()),a.setAjaxParam("id",a.getSelectedRows()),a.getDataTable().ajax.reload(),a.clearAjaxParams()):""==e.val()?Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một hành động",container:a.getTableWrapper(),place:"prepend"}):0===a.getSelectedRowsCount()&&Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một bình luận",container:a.getTableWrapper(),place:"prepend"})})};return{init:function(){a()}}}(),ReviewList=function(){var a=function(){var a=new Datatable;a.init({src:$("#datatable_reviews"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,200],[20,50,100,150,200]],pageLength:20,ajax:{url:"process/get-review3.php"},order:[[1,"desc"]]}}),a.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var e=$(".table-group-action-input",a.getTableWrapper());""!=e.val()&&a.getSelectedRowsCount()>0?(a.setAjaxParam("customActionType","group_action"),a.setAjaxParam("customActionValue",e.val()),a.setAjaxParam("id",a.getSelectedRows()),a.getDataTable().ajax.reload(),a.clearAjaxParams()):""==e.val()?Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một hành động",container:a.getTableWrapper(),place:"prepend"}):0===a.getSelectedRowsCount()&&Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một nhận xét",container:a.getTableWrapper(),place:"prepend"})})};return{init:function(){a()}}}(),CmtRvw=function(){var a=function(){var a=new Bloodhound({datumTokenizer:function(a){return a.tokens},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:"process/select-book.php?q=%QUERY"});a.initialize(),$("#book").typeahead(null,{name:"book",displayKey:"id",source:a.ttAdapter(),hint:!0,templates:{suggestion:Handlebars.compile(['<div class="media">','<div class="pull-left">','<div class="media-object">','<img src="../../50x67/{{img1}}"/>',"</div>","</div>",'<div class="media-body">','<h4 class="media-heading">{{title}}</h4>','<p style="margin-bottom: 5px">{{id}}</p>',"<p>{{cate}}</p>","</div>","</div>"].join(""))}})},t=function(){var a=new Bloodhound({datumTokenizer:function(a){return a.tokens},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:"process/select-user.php?q=%QUERY"});a.initialize(),$("#user").typeahead(null,{name:"user",displayKey:"id",source:a.ttAdapter(),hint:!0,templates:{suggestion:Handlebars.compile(['<div class="media">','<div class="pull-left">','<div class="media-object">','<img src="../../50x67/{{image}}"/>',"</div>","</div>",'<div class="media-body">','<h4 class="media-heading">{{name}}</h4>','<p style="margin-bottom: 5px">{{id}}</p>',"<p>{{scode}}</p>","</div>","</div>"].join(""))}})};return{init:function(){a(),t()}}}(),RequestList=function(){var a=function(){var a=new Datatable;a.init({src:$("#datatable_requests"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,200],[20,50,100,150,200]],pageLength:20,ajax:{url:"process/get-request2.php"},order:[[1,"desc"]]}}),a.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var e=$(".table-group-action-input",a.getTableWrapper());""!=e.val()&&a.getSelectedRowsCount()>0?(a.setAjaxParam("customActionType","group_action"),a.setAjaxParam("customActionValue",e.val()),a.setAjaxParam("id",a.getSelectedRows()),a.getDataTable().ajax.reload(),a.clearAjaxParams()):""==e.val()?Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một hành động",container:a.getTableWrapper(),place:"prepend"}):0===a.getSelectedRowsCount()&&Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một yêu cầu",container:a.getTableWrapper(),place:"prepend"})})};return{init:function(){a()}}}(),ContributeList=function(){var a=function(){var a=new Datatable;a.init({src:$("#datatable_contributes"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,200],[20,50,100,150,200]],pageLength:20,ajax:{url:"process/get-contribute2.php"},order:[[1,"desc"]]}}),a.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var e=$(".table-group-action-input",a.getTableWrapper());""!=e.val()&&a.getSelectedRowsCount()>0?(a.setAjaxParam("customActionType","group_action"),a.setAjaxParam("customActionValue",e.val()),a.setAjaxParam("id",a.getSelectedRows()),a.getDataTable().ajax.reload(),a.clearAjaxParams()):""==e.val()?Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một hành động",container:a.getTableWrapper(),place:"prepend"}):0===a.getSelectedRowsCount()&&Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một đóng góp",container:a.getTableWrapper(),place:"prepend"})})};return{init:function(){a()}}}(),Basic=function(){var a=function(){jQuery().tagsInput&&$("#keyword").tagsInput({width:"auto",onAddTag:function(){}})};return{init:function(){a(),$("#keyword_tagsinput").attr("class","form-control tagsinput"),$("#summernote").summernote(),$("#summernote2").summernote(),$("#summernote3").summernote()}}}(),SubList=function(){var a=function(){var a=new Datatable;a.init({src:$("#datatable_subs"),onSuccess:function(){},onError:function(){},loadingMessage:"Đang tải...",dataTable:{lengthMenu:[[20,50,100,150,200],[20,50,100,150,200]],pageLength:20,ajax:{url:"process/get-sub.php"},order:[[1,"desc"]]}}),a.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var e=$(".table-group-action-input",a.getTableWrapper());""!=e.val()&&a.getSelectedRowsCount()>0?(a.setAjaxParam("customActionType","group_action"),a.setAjaxParam("customActionValue",e.val()),a.setAjaxParam("id",a.getSelectedRows()),a.getDataTable().ajax.reload(),a.clearAjaxParams()):""==e.val()?Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một hành động",container:a.getTableWrapper(),place:"prepend"}):0===a.getSelectedRowsCount()&&Metronic.alert({type:"danger",icon:"warning",message:"Hãy chọn một đăng ký theo dõi",container:a.getTableWrapper(),place:"prepend"})})};return{init:function(){a()}}}();